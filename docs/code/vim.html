<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>vim</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <link rel="stylesheet" href="/css/common.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<h1 id="vim---vi-improved">VIM - Vi IMproved</h1>
<h2 id="vim-命令行">vim 命令行</h2>
<ul>
<li><p><code>vim [file ..]</code></p>
<ul>
<li><p><code>vim</code></p>
<pre><code>不带任何参数, 开始一个空白的缓冲区</code></pre></li>
<li><p><code>vim -</code></p>
<pre><code>从标准输入读取文本</code></pre></li>
<li><p><code>vim file</code></p>
<pre><code>编辑单个文件, 为避免以`-` 开头的文件被识别成命令行选项, 需在文件名前加 `--`, 例如文件名是`-txt`, 输入`vim -- -txt`</code></pre></li>
<li><p><code>vim file1 file2 ...</code></p>
<pre><code>编辑多个文件, 读入缓冲区列表, 其中第一个文件会成为当前文件</code></pre></li>
</ul></li>
<li><p>定位</p>
<ul>
<li><p><code>vim file +[n]</code></p>
<pre><code>光标定位在第 n 行, 如果不加 n 则定位在最后一行</code></pre></li>
<li><p><code>vim file +/{pat}</code></p>
<pre><code>从光标位置(viminfo 中上次的位置)开始匹配 `pat` 并定位到这一行, `vim +5 +/abc` 从第5行开始匹配 abc</code></pre></li>
</ul></li>
<li><p>模式</p>
<ul>
<li><p><code>vim -e</code></p>
<pre><code>以 Ex 模式启动</code></pre></li>
<li><p><code>vim -R</code></p>
<pre><code>以只读模式启动</code></pre></li>
</ul></li>
<li><p>执行</p>
<ul>
<li><p><code>vim +{cmd}</code></p></li>
<li><p><code>vim -c {cmd}</code></p>
<pre><code>读入第一个文件后执行 `cmd`</code></pre></li>
<li><p><code>vim --cmd {cmd}</code></p>
<pre><code>在处理任何 `vimrc` 文件之前执行命令 `cmd`</code></pre></li>
<li><p><code>vim -u {vimrc}</code></p>
<pre><code>读入文件 `vimrc` 执行初始化, `-u` 参数导致开启 `compatible`</code></pre></li>
<li><p><code>vim -u NONE</code></p>
<pre><code>跳过所有文件和环境变量的初始化</code></pre></li>
<li><p><code>vim -u NORC</code></p>
<pre><code>同 `NONE`,  但不跳过插件的载入</code></pre></li>
</ul></li>
<li><p>兼容</p>
<ul>
<li><p><code>vim -C</code></p>
<pre><code>兼容模式</code></pre></li>
<li><p><code>vim -N</code></p>
<pre><code>不兼容模式</code></pre></li>
</ul></li>
</ul>
<h2 id="模式">模式</h2>
<ol type="1">
<li><p><code>Normal mode</code></p>
<p>也称<code>Command mode</code>, 进入 vim 的初始模式, 其他模式下输入
<code>ESC</code> 回到 <code>Normal</code>, <code>Ex</code> 模式下输入
<code>vi[sual]</code> 回到 <code>Normal</code></p></li>
<li><p><code>Visual mode</code></p>
<p>可视模式, <code>Normal</code> 下输入 <code>v</code>, <code>V</code>
或 <code>&lt;C-V&gt;</code> 进入</p></li>
<li><p><code>Select mode</code></p>
<p>选择模式, <code>Visual</code> 下输入 <code>&lt;C-G&gt;</code> 进入,
选择模式下, 输入字符将删除高亮的文本并替换成新的字符, 进入
<code>Insert</code></p></li>
<li><p><code>Insert mode</code></p>
<p>插入模式, <code>Normal</code> 下输入 <code>i</code>, <code>I</code>,
<code>a</code>, <code>A</code>, <code>o</code>, <code>O</code>,
<code>s</code>, <code>S</code> 等进入</p></li>
<li><p><code>Command-line mode</code></p>
<p>命令行模式, <code>Normal</code> 下输入 <code>:</code>,
<code>/</code>, <code>?</code>, <code>!</code> 进入, 执行完
<code>Ex</code> 命令后回到 <code>Normal</code></p></li>
<li><p><code>Ex mode</code></p>
<p>类似 <code>Command-line</code>, 执行完 <code>Ex</code> 命令后还在
<code>Ex</code> 模式, <code>Normal</code> 下输入 <code>Q</code> 或
<code>gQ</code> 进入</p></li>
</ol>
<h2 id="normal-模式"><code>Normal</code> 模式</h2>
<h3 id="移动与滚屏">移动与滚屏</h3>
<table>
<thead>
<tr class="header">
<th>输入</th>
<th>效果</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>h</code> <code>←</code></td>
<td>向左移动</td>
</tr>
<tr class="even">
<td><code>j</code> <code>↓</code></td>
<td>向下移动</td>
</tr>
<tr class="odd">
<td><code>k</code> <code>↑</code></td>
<td>向上移动</td>
</tr>
<tr class="even">
<td><code>l</code> <code>→</code></td>
<td>向右移动</td>
</tr>
<tr class="odd">
<td><code>gk</code> <code>gj</code></td>
<td>屏幕行上下移动</td>
</tr>
<tr class="even">
<td><code>w</code></td>
<td>移动到下一个单词开头</td>
</tr>
<tr class="odd">
<td><code>W</code></td>
<td>移动到下一个字串开头</td>
</tr>
<tr class="even">
<td><code>b</code></td>
<td>反向移动一个单词至开头</td>
</tr>
<tr class="odd">
<td><code>B</code></td>
<td>反向移动一个字串至开头</td>
</tr>
<tr class="even">
<td><code>e</code></td>
<td>移动到单词末尾</td>
</tr>
<tr class="odd">
<td><code>E</code></td>
<td>移动到字串末尾</td>
</tr>
<tr class="even">
<td><code>ge</code></td>
<td>反向移动到单词末尾</td>
</tr>
<tr class="odd">
<td><code>gE</code></td>
<td>反向移动到字串末尾</td>
</tr>
<tr class="even">
<td><code>nw</code> <code>ne</code></td>
<td>移动n(输入的数字)个单词</td>
</tr>
<tr class="odd">
<td><code>0</code> <code>&lt;Home&gt;</code></td>
<td>移动到行首</td>
</tr>
<tr class="even">
<td><code>$</code> <code>&lt;End&gt;</code></td>
<td>移动到行尾</td>
</tr>
<tr class="odd">
<td><code>g0</code></td>
<td>移动到屏幕行行首</td>
</tr>
<tr class="even">
<td><code>^</code></td>
<td>移动到行首第一个非空字符</td>
</tr>
<tr class="odd">
<td><code>g^</code></td>
<td>移动到屏幕行行首第一个非空字符</td>
</tr>
<tr class="even">
<td><code>g$</code></td>
<td>移动到屏幕行行尾</td>
</tr>
<tr class="odd">
<td><code>3$</code></td>
<td>移动到下面第3行行尾，本行是第一行</td>
</tr>
<tr class="even">
<td><code>3^</code></td>
<td>依然作用于本行, 计数对 <code>^</code> 无效</td>
</tr>
<tr class="odd">
<td><code>&lt;C-U&gt;</code></td>
<td>上移半屏</td>
</tr>
<tr class="even">
<td><code>&lt;C-D&gt;</code></td>
<td>下移半屏</td>
</tr>
<tr class="odd">
<td><code>&lt;C-Y&gt;</code></td>
<td>上移一行</td>
</tr>
<tr class="even">
<td><code>&lt;C-E&gt;</code></td>
<td>下移一行</td>
</tr>
<tr class="odd">
<td><code>&lt;C-B&gt;</code></td>
<td>上移一屏</td>
</tr>
<tr class="even">
<td><code>&lt;C-F&gt;</code></td>
<td>下移一屏</td>
</tr>
<tr class="odd">
<td><code>zz</code></td>
<td>将当前行置于屏幕中央</td>
</tr>
<tr class="even">
<td><code>zt</code></td>
<td>将当前行置顶</td>
</tr>
<tr class="odd">
<td><code>zb</code></td>
<td>将当前行置底</td>
</tr>
</tbody>
</table>
<p>一些解释</p>
<ul>
<li><p>实际行与屏幕行</p>
<p>对于很长的一行文字, 屏幕上一行显示不全的情况,
一行实际行就对应多行屏幕行, <code>set number</code>
显示的行号就是实际行</p></li>
<li><p>单词与字串</p>
<ul>
<li>单词(<code>word</code>):
以非字母分隔(一串没有标点的中文为一个单词)</li>
<li>字串(<code>WORD</code>): 以空白符分隔</li>
</ul></li>
<li><p>移动行与滚屏</p>
<p>移动行就是在行之间移动, 如无必要, 不会移动屏幕, 例如当前屏幕下显示
<code>20 - 60</code> 行, 从第 25 行移动到 31 行并不会移动屏幕,
但移动到第 61 行会导致屏幕下移一行; 移屏同理,
必要时才会导致行的移动</p></li>
</ul>
<h3 id="插入文本">插入文本</h3>
<table>
<thead>
<tr class="header">
<th>输入</th>
<th>效果</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>i</code></td>
<td>在光标处插入文本</td>
</tr>
<tr class="even">
<td><code>ni</code></td>
<td>在光标处插入字符n次</td>
</tr>
<tr class="odd">
<td><code>I</code></td>
<td>在行首插入文本, 即 <code>^i</code></td>
</tr>
<tr class="even">
<td><code>a</code></td>
<td>在光标后插入文本</td>
</tr>
<tr class="odd">
<td><code>na</code></td>
<td>在光标后插入字符n次</td>
</tr>
<tr class="even">
<td><code>A</code></td>
<td>在行尾添加文本, 即 <code>$a</code></td>
</tr>
<tr class="odd">
<td><code>o</code></td>
<td>在光标下行插入一行并进入插入模式</td>
</tr>
<tr class="even">
<td><code>O</code></td>
<td>在光标上行插入一行并进入插入模式</td>
</tr>
<tr class="odd">
<td><code>r</code></td>
<td>在光标处替换字符</td>
</tr>
<tr class="even">
<td><code>R</code></td>
<td>在光标处连续替换字符</td>
</tr>
<tr class="odd">
<td><code>c&lt;CR&gt;</code></td>
<td>删除当前行并(在下一行)进入插入模式</td>
</tr>
<tr class="even">
<td><code>S</code> <code>^c</code></td>
<td>删除当前行并进入插入模式</td>
</tr>
<tr class="odd">
<td><code>cl</code> <code>s</code></td>
<td>删除一个字符并进入插入模式</td>
</tr>
<tr class="even">
<td><code>ce</code> <code>cw</code></td>
<td>删除一个单词并进入插入模式</td>
</tr>
<tr class="odd">
<td><code>c$</code> <code>C</code></td>
<td>删除至行尾并进入插入模式</td>
</tr>
</tbody>
</table>
<h3 id="文本操作">文本操作</h3>
<table>
<thead>
<tr class="header">
<th>输入</th>
<th>效果</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>x</code></td>
<td>删除光标所在位置的字符</td>
</tr>
<tr class="even">
<td><code>dw</code></td>
<td>从当前光标当前位置直到下一个单词起始处</td>
</tr>
<tr class="odd">
<td><code>de</code></td>
<td>从当前光标当前位置直到单词末尾</td>
</tr>
<tr class="even">
<td><code>d$</code> <code>D</code></td>
<td>从当前光标删除到行末</td>
</tr>
<tr class="odd">
<td><code>dnw</code></td>
<td>删除n个单词</td>
</tr>
<tr class="even">
<td><code>dd</code></td>
<td>删除整行</td>
</tr>
<tr class="odd">
<td><code>ndd</code></td>
<td>删除n行</td>
</tr>
<tr class="even">
<td><code>daw</code></td>
<td>删除光标所在的单词及其后的空格</td>
</tr>
<tr class="odd">
<td><code>J</code></td>
<td>删除两行之间的换行符</td>
</tr>
<tr class="even">
<td><code>y</code></td>
<td>在可视状态下输入y进行复制</td>
</tr>
<tr class="odd">
<td><code>yw</code> <code>yy</code></td>
<td>复制单词/整行</td>
</tr>
<tr class="even">
<td><code>p</code></td>
<td>在光标后粘贴</td>
</tr>
<tr class="odd">
<td><code>P</code></td>
<td>在光标前粘贴</td>
</tr>
<tr class="even">
<td><code>gp</code> <code>gP</code></td>
<td>同 <code>p</code> <code>P</code>, 但光标停留在新文本之后</td>
</tr>
</tbody>
</table>
<p>一些解释</p>
<ol type="1">
<li>vim 术语: <code>delete</code>, <code>yank</code> 与
<code>put</code></li>
</ol>
<h3 id="文本对象">文本对象</h3>
<h4 id="操作分隔符">操作分隔符</h4>
<table>
<thead>
<tr class="header">
<th>文本对象</th>
<th>选择区域</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>a) 或 ab</td>
<td>一对圆括号(parentheses)</td>
</tr>
<tr class="even">
<td>i) 或 ib</td>
<td>圆括号(parentheses)内部</td>
</tr>
<tr class="odd">
<td>a} 或 aB</td>
<td>一对花括号{braces}</td>
</tr>
<tr class="even">
<td>i} 或 iB</td>
<td>花括号{braces}内部</td>
</tr>
<tr class="odd">
<td>a]</td>
<td>一对方括号[brackets]</td>
</tr>
<tr class="even">
<td>i]</td>
<td>方括号[brackets]内部</td>
</tr>
<tr class="odd">
<td>a&gt;</td>
<td>一对尖括号</td>
</tr>
<tr class="even">
<td>i&gt;</td>
<td>尖括号内部</td>
</tr>
<tr class="odd">
<td>a’</td>
<td>一对单引号’single quotes’</td>
</tr>
<tr class="even">
<td>i’</td>
<td>单引号’single quotes’内部</td>
</tr>
<tr class="odd">
<td>a”</td>
<td>一对双引号”double quotes”</td>
</tr>
<tr class="even">
<td>i”</td>
<td>双引号”double quotes”内部</td>
</tr>
<tr class="odd">
<td>a`</td>
<td>一对反引号</td>
</tr>
<tr class="even">
<td>i`</td>
<td>反引号内部</td>
</tr>
<tr class="odd">
<td>at</td>
<td>一对XML标签<xml>tags</xml></td>
</tr>
<tr class="even">
<td>it</td>
<td>XML标签内部</td>
</tr>
</tbody>
</table>
<h4 id="操作文本块">操作文本块</h4>
<table>
<thead>
<tr class="header">
<th>文本对象</th>
<th>选择范围</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>iw</td>
<td>当前单词</td>
</tr>
<tr class="even">
<td>aw</td>
<td>当前单词及一个空格</td>
</tr>
<tr class="odd">
<td>iW</td>
<td>当前字串</td>
</tr>
<tr class="even">
<td>aW</td>
<td>当前字串及一个空格</td>
</tr>
<tr class="odd">
<td>is</td>
<td>当前句子</td>
</tr>
<tr class="even">
<td>as</td>
<td>当前句子及一个空格</td>
</tr>
<tr class="odd">
<td>ip</td>
<td>当前段落</td>
</tr>
<tr class="even">
<td>ap</td>
<td>当前段落及一个空行</td>
</tr>
</tbody>
</table>
<h3 id="文本可视">文本可视</h3>
<table>
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="header">
<th>输入</th>
<th>效果</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>viw</code></td>
<td>可视一个单词</td>
</tr>
<tr class="even">
<td><code>v</code></td>
<td>面向字符的可视模式</td>
</tr>
<tr class="odd">
<td><code>V</code></td>
<td>面向行的可视模式</td>
</tr>
<tr class="even">
<td><code>&lt;C-v&gt;</code></td>
<td>面向列块的可视模式</td>
</tr>
<tr class="odd">
<td><code>gv</code></td>
<td>重选上次的高亮选区</td>
</tr>
<tr class="even">
<td><code>vi}</code></td>
<td>高亮选中{}内部的文本</td>
</tr>
<tr class="odd">
<td><code>u</code></td>
<td>撤消最后执行的命令</td>
</tr>
<tr class="even">
<td><code>U</code></td>
<td>撤消对整行的修改, <code>U</code> 本身是一个修改动作，因此用
<code>u</code> 来撤销 <code>U</code></td>
</tr>
<tr class="odd">
<td><code>&lt;C-R&gt;</code></td>
<td>撤销之前的撤销,取消一个 <code>u</code></td>
</tr>
</tbody>
</table>
<h3 id="定位">定位</h3>
<table>
<colgroup>
<col style="width: 16%" />
<col style="width: 83%" />
</colgroup>
<thead>
<tr class="header">
<th>输入</th>
<th>效果</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>&lt;C-g&gt;</code></td>
<td>显示当前编辑的文件名和文件中光标位置</td>
</tr>
<tr class="even">
<td><code>G</code></td>
<td>跳到文件最后一行</td>
</tr>
<tr class="odd">
<td><code>gg</code></td>
<td>跳到文件第一行</td>
</tr>
<tr class="even">
<td><code>nG</code></td>
<td>跳到 n 行</td>
</tr>
<tr class="odd">
<td><code>50%</code></td>
<td>移动到中间的位置</td>
</tr>
<tr class="even">
<td><code>90%</code></td>
<td>移动到90%的位置</td>
</tr>
<tr class="odd">
<td><code>&lt;C-o&gt;</code></td>
<td>回到之前的位置</td>
</tr>
<tr class="even">
<td><code>&lt;C-i&gt;</code> <code>&lt;Tab&gt;</code></td>
<td>回到新的位置</td>
</tr>
<tr class="odd">
<td><code>m{a-zA-Z}</code></td>
<td>设置标记位，小写位置标记只在每个缓冲区里局部可见，而大写位置标记则全局可见</td>
</tr>
<tr class="even">
<td><code>'{mark}</code></td>
<td>命令跳到位置标记所在行，并把光标置于该行第一个非空白字符上</td>
</tr>
<tr class="odd">
<td>`{mark}</td>
<td>命令把光标移动到设置此位置标记时光标所在之处，它同时恢复行、列的位置</td>
</tr>
<tr class="even">
<td><code>%</code></td>
<td><code>()[]{}</code> 间跳转</td>
</tr>
<tr class="odd">
<td><code>(</code></td>
<td>跳转到上一句开头</td>
</tr>
<tr class="even">
<td><code>)</code></td>
<td>跳转到下一句开头</td>
</tr>
<tr class="odd">
<td><code>{</code></td>
<td>跳转到上一段开头</td>
</tr>
<tr class="even">
<td><code>}</code></td>
<td>跳转到下一段开头</td>
</tr>
<tr class="odd">
<td><code>H/M/L</code></td>
<td>跳到屏幕最上方/正中间/最下方</td>
</tr>
<tr class="even">
<td><code>gf</code></td>
<td>跳转到光标下的文件名, <code>:set suffixesadd+=</code>
可以加上扩展名</td>
</tr>
<tr class="odd">
<td><code>&lt;C-]&gt;</code></td>
<td>跳转到光标下关键字的定义之处</td>
</tr>
</tbody>
</table>
<p>自动位置标记</p>
<table>
<thead>
<tr class="header">
<th>位置标记</th>
<th>跳转到</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>``</td>
<td>当前文件中上次跳转动作之前的位置</td>
</tr>
<tr class="even">
<td>’’</td>
<td>同``</td>
</tr>
<tr class="odd">
<td>`.</td>
<td>上次修改的地方</td>
</tr>
<tr class="even">
<td>`^</td>
<td>上次插入的地方</td>
</tr>
<tr class="odd">
<td>`[</td>
<td>上次修改或复制的起始位置</td>
</tr>
<tr class="even">
<td>`]</td>
<td>上次修改或复制的结束位置</td>
</tr>
<tr class="odd">
<td>`&lt;</td>
<td>上次高亮选区的起始位置</td>
</tr>
<tr class="even">
<td>`&gt;</td>
<td>上次高亮选区的结束位置</td>
</tr>
</tbody>
</table>
<h3 id="缩进">缩进</h3>
<table>
<thead>
<tr class="header">
<th>输入</th>
<th>效果</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>&gt;&gt;</code> <code>&gt;0</code></td>
<td>当前行缩进</td>
</tr>
<tr class="even">
<td><code>&gt;n</code></td>
<td>当前行及以下n行缩进</td>
</tr>
<tr class="odd">
<td><code>&gt;G</code></td>
<td>当前行至文档尾缩进</td>
</tr>
<tr class="even">
<td><code>&lt;</code></td>
<td>减少缩进</td>
</tr>
<tr class="odd">
<td><code>=</code></td>
<td>自动缩进</td>
</tr>
<tr class="even">
<td><code>gg=G</code></td>
<td>自动缩进整个文件</td>
</tr>
</tbody>
</table>
<h3 id="其他命令">其他命令</h3>
<table>
<thead>
<tr class="header">
<th>输入</th>
<th>效果</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>ZZ</code></td>
<td>保存后退出</td>
</tr>
<tr class="even">
<td><code>ga</code></td>
<td>显示字符编码</td>
</tr>
<tr class="odd">
<td><code>q:</code> <code>q/</code></td>
<td>命令行窗口</td>
</tr>
<tr class="even">
<td><code>@:</code></td>
<td>重复上次的 Ex 命令</td>
</tr>
<tr class="odd">
<td><code>&lt;C-^&gt;</code></td>
<td>切换当前文件与轮换文件</td>
</tr>
<tr class="even">
<td><code>.</code></td>
<td>重复上一次命令, 移动命令不会重复</td>
</tr>
<tr class="odd">
<td>n<code>&lt;C-a&gt;</code></td>
<td>对数字执行 +n 操作</td>
</tr>
<tr class="even">
<td>n<code>&lt;C-x&gt;</code></td>
<td>对数字执行 -n 操作</td>
</tr>
<tr class="odd">
<td><code>g~</code></td>
<td>切换大小写</td>
</tr>
<tr class="even">
<td><code>gu</code></td>
<td>切换成小写</td>
</tr>
<tr class="odd">
<td><code>gU</code></td>
<td>切换成大写</td>
</tr>
</tbody>
</table>
<h2 id="visual-模式"><code>Visual</code> 模式</h2>
<table>
<thead>
<tr class="header">
<th>输入</th>
<th>效果</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>o</code></td>
<td>切换高亮选区的活动端</td>
</tr>
</tbody>
</table>
<h2 id="ex-命令">Ex 命令</h2>
<p><code>Normal</code> 下输入 <code>:</code> 或 <code>Q</code>
进入相应的模式, 可以执行 <code>Ex</code> 命令(输入完命令后回车执行)</p>
<p>输入 <code>ESC</code> 或 <code>&lt;C-[&gt;</code>
可以回到正常模式或者撤消一个不想输入或部分完整的命令</p>
<table>
<colgroup>
<col style="width: 38%" />
<col style="width: 61%" />
</colgroup>
<thead>
<tr class="header">
<th>命令</th>
<th>效果</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>[range]delete [x]</code></td>
<td>删除指定范围内的行[到寄存器x中]</td>
</tr>
<tr class="even">
<td><code>[range]yank [x]</code></td>
<td>复制指定范围的行[到寄存器x中]</td>
</tr>
<tr class="odd">
<td><code>[line]put [x]</code></td>
<td>在指定行后粘贴寄存器x中的内容</td>
</tr>
<tr class="even">
<td><code>[range]copy {address}</code></td>
<td>把指定范围内的行拷贝到{address} 所指定的行之下, 不使用寄存器 简写为
:t, :co</td>
</tr>
<tr class="odd">
<td><code>[range]move {address}</code></td>
<td>把指定范围内的行移动到{address}所指定的行之下 简写为 :m</td>
</tr>
<tr class="even">
<td><code>[range]join</code></td>
<td>连接指定范围内的行</td>
</tr>
<tr class="odd">
<td><code>[range]normal {commands}</code></td>
<td>对指定范围内的每一行执行普通模式命令{commands}</td>
</tr>
<tr class="even">
<td><code>[range]substitute/{pattern}/ {string}/[flags]</code></td>
<td>把指定范围内出现{pattern}的地方替换为{string}</td>
</tr>
<tr class="odd">
<td><code>[range]global/{pattern}/[cmd]</code></td>
<td>对指定范围内匹配{pattern}的所有行，在其上执行Ex 命令{cmd}</td>
</tr>
<tr class="even">
<td><code>[range]print[flags]</code></td>
<td>显示 [range] 范围里的行 (缺省是当前行) 简写为 :p</td>
</tr>
<tr class="odd">
<td><code>&lt;C-f&gt;</code></td>
<td>切换到命令行窗口</td>
</tr>
<tr class="even">
<td><code>!{cmd}</code></td>
<td>执行 shell 命令, 命令行中 <code>%</code> 代表当前文件名</td>
</tr>
<tr class="odd">
<td><code>read !{cmd}</code></td>
<td>把{cmd}命令的输出读入当前缓冲区中, 缓冲区即文件在内存中的映像</td>
</tr>
<tr class="even">
<td><code>write !{cmd}</code></td>
<td>把缓冲区内容作为指定{cmd}的标准输入</td>
</tr>
<tr class="odd">
<td><code>pwd</code></td>
<td>打印当前目录</td>
</tr>
<tr class="even">
<td><code>reg "{reg}</code></td>
<td>查看寄存器内容</td>
</tr>
</tbody>
</table>
<p>一些解释</p>
<ul>
<li><code>range: {start,end}</code>
<ul>
<li><code>0</code> 虚拟行，位于文件第一行上方</li>
<li><code>1</code> 文件的第一行</li>
<li><code>.</code> 当前行</li>
<li><code>$</code> 最后一行</li>
<li><code>%</code> 所有行</li>
<li><code>start</code>, <code>end</code> 可以是数字也可以是模式</li>
<li><code>{address}+n</code> 地址偏移</li>
<li><code>'m</code> 包含位置标记m的行</li>
<li><code>'&lt;</code> 高亮选区的起始行</li>
<li><code>'&gt;</code> 高亮选区的结束行</li>
</ul></li>
</ul>
<h3 id="缓冲区操作">缓冲区操作</h3>
<table>
<colgroup>
<col style="width: 38%" />
<col style="width: 61%" />
</colgroup>
<thead>
<tr class="header">
<th>输入</th>
<th>效果</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>w[rite]</code></td>
<td>把缓冲区内容写入磁盘</td>
</tr>
<tr class="even">
<td><code>w file</code></td>
<td>保存在文件 file 中</td>
</tr>
<tr class="odd">
<td><code>q[uit]!</code></td>
<td>丢弃修改退出</td>
</tr>
<tr class="even">
<td><code>e[dit]!</code></td>
<td>把磁盘文件内容读入缓冲区(即回滚所做修改)</td>
</tr>
<tr class="odd">
<td><code>qa[ll]!</code></td>
<td>关闭所有窗口，摒弃修改而无需警告</td>
</tr>
<tr class="even">
<td><code>wa[ll]!</code></td>
<td>把所有改变的缓冲区写入磁盘</td>
</tr>
<tr class="odd">
<td><code>wq</code></td>
<td>保存后退出</td>
</tr>
<tr class="even">
<td><code>ls</code></td>
<td>查看缓冲区列表</td>
</tr>
<tr class="odd">
<td><code>bnext</code></td>
<td>切换到列表中的下一个缓冲区</td>
</tr>
<tr class="even">
<td><code>bnext!</code></td>
<td>强制(未保存)切换缓冲区</td>
</tr>
<tr class="odd">
<td><code>bprev</code></td>
<td>切换到列表中的上一个缓冲区</td>
</tr>
<tr class="even">
<td><code>bfirst</code></td>
<td>切换到列表中的第一个缓冲区</td>
</tr>
<tr class="odd">
<td><code>blast</code></td>
<td>切换到列表中的最后一个缓冲区</td>
</tr>
<tr class="even">
<td><code>buffer N</code> <code>:buffer {bufname}</code></td>
<td>直接跳转到一个缓冲区</td>
</tr>
<tr class="odd">
<td><code>bdelete N1 N2 N3</code> <code>:N,M bdelete</code></td>
<td>删除缓冲区</td>
</tr>
<tr class="even">
<td><code>args</code></td>
<td>查看参数列表, [] 指明了参数列表中的哪个文件是活动文件</td>
</tr>
<tr class="odd">
<td><code>args {arglist}</code></td>
<td>设置参数列表</td>
</tr>
<tr class="even">
<td><code>argdo</code></td>
<td>在列表中的每个缓冲区上执行同一条命令</td>
</tr>
<tr class="odd">
<td><code>e[dit] file</code></td>
<td>通过文件的绝对路径或相对路径来打开文件</td>
</tr>
<tr class="even">
<td><code>find</code></td>
<td>查找打开文件</td>
</tr>
<tr class="odd">
<td><code>set path+=</code></td>
<td>设置 find 路径</td>
</tr>
<tr class="even">
<td><code>r file</code></td>
<td>将file文件的内容插入进来</td>
</tr>
<tr class="odd">
<td><code>changes</code></td>
<td>查看改变列表</td>
</tr>
<tr class="even">
<td><code>jumps</code></td>
<td>查看跳转列表</td>
</tr>
<tr class="odd">
<td><code>marks</code></td>
<td>查看标记列表</td>
</tr>
</tbody>
</table>
<p><code>ls</code> 的输出中</p>
<ul>
<li><code>%</code> 指明哪个缓冲区在当前窗口中可见</li>
<li><code>#</code> 代表轮换文件</li>
<li><code>+</code> 表示这个缓冲区被修改过了</li>
<li><code>a</code> 表示活动缓冲区</li>
<li><code>h</code> 表示隐藏缓冲区</li>
</ul>
<h2 id="insert-模式"><code>Insert</code> 模式</h2>
<table>
<colgroup>
<col style="width: 55%" />
<col style="width: 44%" />
</colgroup>
<thead>
<tr class="header">
<th>输入</th>
<th>效果</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>ESC</code> <code>&lt;C-[&gt;</code></td>
<td>回到正常模式</td>
</tr>
<tr class="even">
<td><code>&lt;C-o&gt;</code></td>
<td>插入-普通模式: 执行一次普遍模式命令后回到插入模式</td>
</tr>
<tr class="odd">
<td><code>&lt;C-r&gt;=</code></td>
<td>把执行的结果插入到文档的当前位置</td>
</tr>
<tr class="even">
<td><code>&lt;C-v&gt;{code}</code></td>
<td>用字符编码插入非常用字符</td>
</tr>
<tr class="odd">
<td>退格键 <code>&lt;C-h&gt;</code></td>
<td>删除前一个字符</td>
</tr>
<tr class="even">
<td><code>&lt;C-w&gt;</code></td>
<td>删除前一个单词</td>
</tr>
<tr class="odd">
<td><code>&lt;C-u&gt;</code></td>
<td>删至行首</td>
</tr>
<tr class="even">
<td><code>&lt;C-r&gt;{register}</code></td>
<td>插入模式下粘贴寄存器中的文本, + 寄存器保存剪切板中的内容</td>
</tr>
<tr class="odd">
<td><code>&lt;C-r&gt;&lt;C-p&gt;{register}</code>
按原义插入寄存器内的文本，并修正任何不必要的缩进</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="寄存器">寄存器</h2>
<table>
<colgroup>
<col style="width: 13%" />
<col style="width: 87%" />
</colgroup>
<thead>
<tr class="header">
<th>寄存器</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>""</code></td>
<td>无名寄存器, ““p 等同 p</td>
</tr>
<tr class="even">
<td><code>"{register}</code></td>
<td>有名寄存器 <code>[a–zA-Z]</code>,
使用小写有名寄存器会覆盖寄存器的内容，大写有名寄存器则添加到后面</td>
</tr>
<tr class="odd">
<td><code>"0</code></td>
<td>复制专用寄存器</td>
</tr>
<tr class="even">
<td><code>"_</code></td>
<td>黑洞寄存器</td>
</tr>
<tr class="odd">
<td><code>"+</code></td>
<td>X11剪贴板，用剪切、复制与粘贴命令操作</td>
</tr>
<tr class="even">
<td><code>"*</code></td>
<td>X11主剪贴板, 用鼠标中键操作</td>
</tr>
<tr class="odd">
<td><code>"=</code></td>
<td>表达式寄存器</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th>只读寄存器</th>
<th>内容</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>“%</td>
<td>当前文件名</td>
</tr>
<tr class="even">
<td>“#</td>
<td>轮换文件名</td>
</tr>
<tr class="odd">
<td>“.</td>
<td>上次插入的文本</td>
</tr>
<tr class="even">
<td>“:</td>
<td>上次执行的Ex命令</td>
</tr>
<tr class="odd">
<td>“/ (可用 :let 修改)</td>
<td>上次查找的模式</td>
</tr>
</tbody>
</table>
<h2 id="搜索">搜索</h2>
<p><code>/string + 回车</code> 向下查找 要查找特殊字符需要用’'来转义
<code>.*[]^%/\?~$</code><br />
<code>?string + 回车</code> 逆向查找<br />
<code>n</code> 查找下一个<br />
<code>3n</code> 查找下面第3个<br />
<code>N</code> 查找上一个<br />
<code>/&lt;CR&gt;</code> 正向跳转至相同模式的下一处匹配<br />
<code>?&lt;CR&gt;</code> 反向跳转至相同模式的上一处匹配<br />
<code>%</code> 匹配括号，在<code>([{}])</code>
处按<code>%</code>会跳到匹配的括号处(再按一次就会回到之前的括号处)<br />
<code>f{char}</code> 到右侧第 [count] 次出现的字符 {char}。光标放在
{char}上<br />
<code>t{char}</code> 同f。光标放在 {char}左侧<br />
<code>F{char}</code> 同f。在左侧匹配<br />
<code>T{char}</code> 同f。在左侧匹配,光标放在{char}右侧<br />
<code>;</code> 重复上次的 f、t、F 或者 T 命令 [count] 次<br />
<code>,</code> 反方向重复上次的 f、t、F 或者 T 命令 [count] 次<br />
<code>f F t T ; ,</code> 只作用于本行<br />
<code>*</code> 正向查找第 [count]
次出现距离当前光标最近的单词的地方<br />
<code>#</code> 同 <code>*</code>，但反向查找<br />
<code>:nohlsearch</code> 暂时关闭查找高亮功能,
直到执行新的或重复的查找命令为止<br />
<code>&lt;C-r&gt;&lt;C-w&gt;</code> 根据预览结果对查找域自动补全<br />
<code>//e&lt;CR&gt;</code> 查找偏移<br />
<code>\&gt;</code> 标记单词结尾，<code>\&lt;标记开头</code><br />
<code>* #</code> 默认使用了<code>\&lt;</code> <code>\&gt;</code>
使用<code>g*</code> <code>g#</code> 来部分匹配</p>
<h2 id="替换">替换</h2>
<p><code>:[range]s[ubstitute]/{pattern}/{string}/[flags]</code></p>
<p><code>:s/old/new</code> 改变光标所在行的第一个匹配串<br />
<code>:s/old/new/g</code> 替换全行的匹配串<br />
<code>:%s/old/new/g</code> 替换整个文件中的每个匹配串<br />
<code>%s/old/new/gc</code>
找到整个文件中的每个匹配串，并且对每个匹配串提示是否进行替换<br />
<code>:#,#s/old/new/g</code> 替换两行之间出现的每个匹配串，#,#
代表的是替换操作的若干行中首尾两行的行号<br />
<code>:%s///gn</code> 统计当前匹配模式的个数, n 抑制正常的替换行为<br />
标志位e专门用于屏蔽这些错误提示<br />
标志位&amp;仅仅用于指示Vim重用上一次substitute命令所用过的标志位<br />
<code>:&amp;&amp;</code> 命令重新执行替换操作, 本身只作用于当前行<br />
<code>:'&lt;,'&gt;&amp;&amp;</code> 作用于高亮选区
<code>:%&amp;&amp;</code> <code>g&amp;</code> 作用于整个文件</p>
<p>替换域中的特殊字符</p>
<table>
<colgroup>
<col style="width: 5%" />
<col style="width: 94%" />
</colgroup>
<thead>
<tr class="header">
<th>符号</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>\r</code></td>
<td>插入一个换行符</td>
</tr>
<tr class="even">
<td><code>\t</code></td>
<td>插入一个制表符</td>
</tr>
<tr class="odd">
<td><code>\\</code></td>
<td>插入一个反斜杠</td>
</tr>
<tr class="even">
<td><code>\1</code></td>
<td>插入第1个子匹配</td>
</tr>
<tr class="odd">
<td><code>\2</code></td>
<td>插入第2个子匹配（以此类推，最多到\9）</td>
</tr>
<tr class="even">
<td><code>\0</code></td>
<td>插入匹配模式的所有内容</td>
</tr>
<tr class="odd">
<td><code>&amp;</code></td>
<td>插入匹配模式的所有内容</td>
</tr>
<tr class="even">
<td><code>~</code></td>
<td>使用上一次调用:substitute时的{string}</td>
</tr>
<tr class="odd">
<td><code>\=</code></td>
<td>{Vim script}执行{Vim
Script}表达式；并将返回的结果作为替换{string}</td>
</tr>
</tbody>
</table>
<h2 id="global-命令">global 命令</h2>
<p><code>:[range] global[!] /{pattern}/ [cmd]</code></p>
<p>在缺省情况下，:global命令的作用范围是整个文件<br />
[cmd] 可以是除:global命令之外的任何Ex命, 缺省使用:print :global!
:vglobal（v表示invert）反转<br />
<code>:g/re/d</code> 删除所有行<br />
<code>:v/re/d</code> 只保留匹配行</p>
<h2 id="设置类命令">设置类命令</h2>
<p><code>:set</code><br />
<code>ic</code> <code>ignorecase</code> 查找时忽略字母大小写<br />
<code>is</code> <code>incsearch</code> 查找短语时显示部分匹配<br />
<code>hls</code> <code>hlsearch</code> 高亮显示所有的匹配短语<br />
<code>/string\c</code> 在一次查找中忽略大小写<br />
在选项前加上 no 可以关闭选项</p>
<table>
<thead>
<tr class="header">
<th>set</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>set ignorecase</td>
<td>打开功能</td>
</tr>
<tr class="even">
<td>set noignorecase</td>
<td>关闭</td>
</tr>
<tr class="odd">
<td>set ignorecase!</td>
<td>反转</td>
</tr>
<tr class="even">
<td>set ignorecase?</td>
<td>查询</td>
</tr>
<tr class="odd">
<td>set ignorecase&amp;</td>
<td>设为默认</td>
</tr>
<tr class="even">
<td>set tabstop=2</td>
<td>设置值</td>
</tr>
</tbody>
</table>
<p><code>:edit $MYVIMRC</code> 编辑 vimrc<br />
<code>:source {file}</code> 加载配置<br />
<code>:source $MYVIMRC</code>
如果vimrc文件恰好是当前活动的缓冲区，则可把此命令简化为 :so %</p>
<h2 id="帮助">帮助</h2>
<p><code>:help</code> <code>F1</code> 显示一般性的帮助信息<br />
<code>:help cmd</code> 显示cmd的帮助信息<br />
<code>CTRL W</code> 在窗口间跳转</p>
<h2 id="配置">配置</h2>
<p><code>~/.vimrc</code>文件</p>
<h2 id="补全">补全</h2>
<p><code>:set nocp</code> 不与Vi兼容模式<br />
<code>&lt;TAB&gt;</code> 尝试自动补全<br />
<code>CTRL D</code> 显示命令列表</p>
<h2 id="自定义">自定义</h2>
<p><code>:map-operator</code> 自定义操作符<br />
<code>omap-info</code> 自定义动作命令</p>
<h2 id="修改-root-用户文件">修改 root 用户文件</h2>
<p><code>:w !sudo tee % &gt; /dev/null</code></p>
<h2 id="宏">宏</h2>
<p>录制宏</p>
<p><code>q{register}</code> 开始录制<br />
<code>q</code> 停止<br />
<code>@{register}</code> 执行指定寄存器的内容<br />
<code>@@</code> 重复最近调用过的宏<br />
如果宏执行动作命令失败了，Vim将中止执行宏的其余命令<br />
<code>qa</code> 会替换之前创建的宏，<code>qA</code> 则追加到之前的宏</p>
<h2 id="模式-1">模式</h2>
<p>设置查找时大小写不敏感 <code>:set ignorecase</code>,
同时也会影响vim关键字的自动补全<br />
查找时使用元字符 可使这次查找忽略/不或略大小写<br />
<code>:set smartcase</code>
在全小写是忽略大小写，在含有大写时不忽略<br />
<code>\v</code> 开启very magic搜索模式，假定除 <code>_</code>
大小写字母以及数字0到9之外的所有字符都具有特殊含义<br />
<code>\V</code> 开启very nomagic搜索模式，即按原义查找文本
圆括号用以捕获，\1 \2 .. \9 表示第n个捕获项，\0 匹配整个串<br />
<code>\_s</code> 匹配空白符或换行符<br />
very magic搜索模式下，用 <与>符号表示单词定界符<br />
，包括字母、数字以及符号 <code>_</code>，而 在圆括号前面加上%，指
示Vim不要将括号内的内容赋给寄存器<br />
元字符，而元字符，例如 <code>/\v"\zs[^"]+\ze"&lt;CR&gt;</code>
模式包含字符串，但只匹配引号内的文本</p>
<h2 id="工具">工具</h2>
<h3 id="grep-vimgrep">:grep :vimgrep</h3>
<p><code>:grep</code> vim 调用外部 grep，会创建 quickfix 列表</p>
<p><code>:vim[grep][!] /{pattern}/[g][j] {file} ...</code></p>
<h3 id="自动补全">自动补全</h3>
<p>开启 ignorecase 后，自动补全也会忽略大小写<br />
<code>:set infercase</code>
仍会联想大小写，补全时不会替换已输入字符的大小写</p>
<p>触发Vim自动补全的方法</p>
<table>
<thead>
<tr class="header">
<th>命令</th>
<th>补全类型</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>&lt;C-n&gt;</code> 或 <code>&lt;C-p&gt;</code></td>
<td>普通关键字</td>
</tr>
<tr class="even">
<td><code>&lt;C-x&gt;&lt;C-n&gt;</code></td>
<td>当前缓冲区关键字</td>
</tr>
<tr class="odd">
<td><code>&lt;C-x&gt;&lt;C-i&gt;</code></td>
<td>包含文件关键字</td>
</tr>
<tr class="even">
<td><code>&lt;C-x&gt;&lt;C-]&gt;</code></td>
<td>标签文件关键字</td>
</tr>
<tr class="odd">
<td><code>&lt;C-x&gt;&lt;C-k&gt;</code></td>
<td>字典查找</td>
</tr>
<tr class="even">
<td><code>&lt;C-x&gt;&lt;C-l&gt;</code></td>
<td>整行补全</td>
</tr>
<tr class="odd">
<td><code>&lt;C-x&gt;&lt;C-f&gt;</code></td>
<td>文件名补全</td>
</tr>
<tr class="even">
<td><code>&lt;C-x&gt;&lt;C-o&gt;</code></td>
<td>全能（Omni）补全</td>
</tr>
</tbody>
</table>
<p>补全菜单交互命令</p>
<table>
<colgroup>
<col style="width: 23%" />
<col style="width: 76%" />
</colgroup>
<thead>
<tr class="header">
<th>按键操作</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>&lt;C-n&gt;</code></td>
<td>使用来自补全列表的下一个匹配项（next匹配项）</td>
</tr>
<tr class="even">
<td><code>&lt;C-p&gt;</code></td>
<td>使用来自补全列表的上一个匹配项（previous匹配项）</td>
</tr>
<tr class="odd">
<td><code>&lt;Down&gt;</code></td>
<td>选择来自补全列表的下一个匹配项</td>
</tr>
<tr class="even">
<td><code>&lt;Up&gt;</code></td>
<td>选择来自补全列表的上一个匹配项</td>
</tr>
<tr class="odd">
<td><code>&lt;C-y&gt;</code></td>
<td>确认使用当前选中的匹配项（yes）</td>
</tr>
<tr class="even">
<td><code>&lt;C-e&gt;</code></td>
<td>还原最早输入的文本（从自动补全中exit）</td>
</tr>
<tr class="odd">
<td><code>&lt;C-h&gt;</code>（与<code>&lt;BS&gt;</code>）</td>
<td>从当前匹配项中删除一个字符</td>
</tr>
<tr class="even">
<td><code>&lt;C-l&gt;</code></td>
<td>从当前匹配项中增加一个字符{char} 中止自动补全并插入字符{char}@</td>
</tr>
</tbody>
</table>
<h3 id="拼写检查">拼写检查</h3>
<p><code>:set spell</code> 开启拼写检查<br />
<code>set spelllang=en_us</code> 设置语言</p>
<table>
<thead>
<tr class="header">
<th>命令</th>
<th>用途</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>]s</code></td>
<td>跳到下一处拼写错误</td>
</tr>
<tr class="even">
<td><code>[s</code></td>
<td>跳到上一处拼写错误</td>
</tr>
<tr class="odd">
<td><code>z=</code></td>
<td>为当前单词提供更正建议</td>
</tr>
<tr class="even">
<td><code>zg</code></td>
<td>把当前单词添加到拼写文件中</td>
</tr>
<tr class="odd">
<td><code>zw</code></td>
<td>把当前单词从拼写文件中删除</td>
</tr>
<tr class="even">
<td><code>zug</code></td>
<td>撤销针对当前单词的zg或zw命令</td>
</tr>
</tbody>
</table>
<p><code>spellfile</code> 指定文件保存由zg 和zw
命令所添加、删除的单词</p>
<p>插入模式下通过<code>&lt;C-x&gt;s</code>
<code>&lt;C-x&gt;&lt;C-s&gt;</code>更正拼写错误，该命令会触发一个特殊的自动补全功能</p>
<p>开启 expandtab <code>&lt;C-v&gt;&lt;Tab&gt;</code> 会插入制表符</p>
<h3 id="自动命令">自动命令</h3>
<p><code>autocmd {event} {pattern} {cmd}</code></p>
<p>在 <code>cmd</code> 中，<code>&lt;afile&gt;</code> 代表当前文件名</p>
<p>多个 <code>pattern</code> 以逗号分隔</p>
<p><code>FileType</code>
事件用于匹配文件类型，<code>set filetype?</code> 查看文件类型</p>
<p>销毁自动命令 <code>autocmd!</code></p>
<p>自动命令组 <code>augroup</code></p>
<h3 id="bash-绑定-vi-键位">bash 绑定 vi 键位</h3>
<p><code>set -o emacs</code> <code>set -o vi</code> 分别设置交互式 bash
的键位为 emacs 和 vi 模式, 默认是 emacs 模式</p>
<p>vi 模式下，默认是插入模式，按 ESC 回到一般模式</p>
<h2 id="ctags">ctags</h2>
<h3 id="安装与使用">安装与使用</h3>
<ul>
<li><a href="http://ctags.sourceforge.net/"
class="uri">http://ctags.sourceforge.net/</a></li>
<li><a href="https://github.com/universal-ctags/ctags"
class="uri">https://github.com/universal-ctags/ctags</a></li>
</ul>
<pre class="shell"><code>sudo apt install exuberant-ctags universal-ctags
ctags files</code></pre>
<h3 id="vim-跳转">vim 跳转</h3>
<table>
<colgroup>
<col style="width: 13%" />
<col style="width: 86%" />
</colgroup>
<thead>
<tr class="header">
<th>命令</th>
<th>用途</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>&lt;C-]&gt;</code></td>
<td>跳转到匹配当前光标所在关键字的第一处标签</td>
</tr>
<tr class="even">
<td><code>g&lt;C-]&gt;</code></td>
<td>如果有多处标签可以匹配当前光标所在的关键字，提示用户指定一处进行跳转。如果只有一处匹配，则不会提示，直接进行跳转</td>
</tr>
<tr class="odd">
<td><code>:tag {keyword}</code></td>
<td>跳转到匹配{keyword}的第一处标签</td>
</tr>
<tr class="even">
<td><code>:tjump {keyword}</code></td>
<td>提示用户从匹配{keyword}的多处标签中指定一处进行跳转。如果只有一处匹配，则不会提示，直接进行跳转</td>
</tr>
<tr class="odd">
<td><code>:pop</code> 或 <code>&lt;C-t&gt;</code></td>
<td>反向遍历标签历史</td>
</tr>
<tr class="even">
<td><code>:tag</code></td>
<td>正向遍历标签历史</td>
</tr>
<tr class="odd">
<td><code>:tnext</code></td>
<td>跳转到下一处匹配的标签</td>
</tr>
<tr class="even">
<td><code>:tprev</code></td>
<td>跳转到上一处匹配的标签</td>
</tr>
<tr class="odd">
<td><code>:tfirst</code></td>
<td>跳转到第一处匹配的标签</td>
</tr>
<tr class="even">
<td><code>:tlast</code></td>
<td>跳转到最后一处匹配的标签</td>
</tr>
<tr class="odd">
<td><code>:tselect</code></td>
<td>提示用户从标签匹配列表中选择一项进行跳转</td>
</tr>
</tbody>
</table>
<h3 id="启动vim时跳转">启动vim时跳转</h3>
<pre class="shell"><code>vim -t tag</code></pre>
<p>需要有 <code>tags</code> 文件,
定位到标签函数(<code>C/C++</code>)的开始处</p>
<h3 id="制作-stdc-tags">制作 stdc++ tags</h3>
<pre class="shell"><code>mkdir ~/.vim/tags
cd ~/.vim/tags/
ctags -R --c++-kinds=+l+x+p --fields=+iaSl --extra=+q --language-force=c++ -f stdcpp.tags /usr/include/c++/10/</code></pre>
<pre class="vim"><code>:set tags+=~/.vim/tags/stdcpp.tags</code></pre>
<h2 id="会话">会话</h2>
<h3 id="保存会话">保存会话</h3>
<p><code>:mksession!</code> 将当前会话写入 <code>Session.vim</code>
中</p>
<h3 id="载入会话">载入会话</h3>
<p>shell中使用 <code>vim -S { file }</code> 读入文件后执行
<code>file</code>, 如果不带 <code>file</code> 参数等价于
<code>vim -S Session.vim</code></p>
<p>或 vim 中执行 <code>:source Session.vim</code></p>
<p><code>:mksession</code> 与 <code>vim -S</code>
默认在当前目录保存和寻找文件，也可以指定文件名来保存和寻找，或是建立多个会话</p>
<h3 id="持久化撤销">持久化撤销</h3>
<p><code>set undofile</code> 开启持久化撤销</p>
<p><code>set undodir=</code> 设置文件存储撤销历史</p>
<h3 id="插件-obsession">插件 obsession</h3>
<pre class="shell"><code>git clone https://github.com/tpope/vim-obsession.git ~/.vim/pack/bundle/start/obsession</code></pre>
<ul>
<li><code>:Obsession</code> 开启/暂停自动保存会话</li>
<li><code>:Obsession!</code> 删除<code>Session.vim</code>
并停止自动保存会话</li>
</ul>
<h2 id="窗口与标签页">窗口与标签页</h2>
<h3 id="启动vim时分割">启动vim时分割</h3>
<ul>
<li><p><code>vim -o[N]</code></p>
<p>打开 <code>N</code> 个窗口，水平分割。如果没有给出
<code>N</code>，为每个文件参数打开一个窗口。
如果没有足够的空间，只打开前面数项。如果给出的窗口数
超过参数的数目，后面的窗口会编辑空文件。</p></li>
<li><p><code>vim -O[N]</code></p>
<p>同 <code>-o</code>, 但垂直分割</p></li>
<li><p><code>vim -p[N]</code></p>
<p>同 <code>-o</code>, 标签页分割, 最大标签页数由
<code>tabpagemax</code> 决定</p></li>
</ul>
<h3 id="窗口">窗口</h3>
<table>
<thead>
<tr class="header">
<th>指令</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>&lt;C-w&gt;s</code></td>
<td>水平切分窗口</td>
</tr>
<tr class="even">
<td><code>&lt;C-w&gt;v</code></td>
<td>垂直切分窗口</td>
</tr>
<tr class="odd">
<td><code>:edit</code></td>
<td>把另外一个缓冲区载入活动窗口中</td>
</tr>
<tr class="even">
<td><code>:sp[lit] {file}</code></td>
<td>水平切分当前窗口，并在新窗口中载入{file}</td>
</tr>
<tr class="odd">
<td><code>:vsp[lit] {file}</code></td>
<td>垂直切分当前窗口，并在新窗口中载入{file}</td>
</tr>
</tbody>
</table>
<h4 id="窗口间切换">窗口间切换</h4>
<table>
<thead>
<tr class="header">
<th>指令</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>&lt;C-w&gt;w</code></td>
<td><code>&lt;C-w&gt;&lt;C-w&gt;</code> 在窗口间循环切换</td>
</tr>
<tr class="even">
<td><code>&lt;C-w&gt;h</code></td>
<td>切换到左边的窗口</td>
</tr>
<tr class="odd">
<td><code>&lt;C-w&gt;j</code></td>
<td>切换到下边的窗口</td>
</tr>
<tr class="even">
<td><code>&lt;C-w&gt;k</code></td>
<td>切换到上边的窗口</td>
</tr>
<tr class="odd">
<td><code>&lt;C-w&gt;l</code></td>
<td>切换到右边的窗口</td>
</tr>
<tr class="even">
<td><code>&lt;C-w&gt;r</code></td>
<td>交换两个窗口</td>
</tr>
</tbody>
</table>
<h4 id="关闭窗口">关闭窗口</h4>
<table>
<thead>
<tr class="header">
<th>Ex 命令</th>
<th>普通模式命令</th>
<th>用途</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>:clo[se]</td>
<td><C-w>c</td>
<td>关闭活动窗口</td>
</tr>
<tr class="even">
<td>:on[ly]</td>
<td><C-w>o</td>
<td>只保留活动窗口，关闭其他所有窗口</td>
</tr>
</tbody>
</table>
<h4 id="改变窗口大小及重新排列窗口">改变窗口大小及重新排列窗口</h4>
<table>
<colgroup>
<col style="width: 26%" />
<col style="width: 73%" />
</colgroup>
<thead>
<tr class="header">
<th>指令</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>&lt;C-w&gt;=</code></td>
<td>使所有窗口等宽、等高</td>
</tr>
<tr class="even">
<td><code>&lt;C-w&gt;_</code></td>
<td>最大化活动窗口的高度</td>
</tr>
<tr class="odd">
<td><code>&lt;C-w&gt;     |</code></td>
<td>最大化活动窗口的宽度</td>
</tr>
<tr class="even">
<td><code>[N]&lt;C-w&gt;</code></td>
<td>_ 把活动窗口的高度设为[N]行</td>
</tr>
<tr class="odd">
<td><code>[N]&lt;C-w&gt;  |</code></td>
<td>把活动窗口的宽度设为[N]列</td>
</tr>
<tr class="even">
<td><code>&lt;C-w&gt;+</code></td>
<td>扩大窗口行数</td>
</tr>
<tr class="odd">
<td><code>&lt;C-w&gt;-</code></td>
<td>减少窗口行数</td>
</tr>
<tr class="even">
<td><code>&lt;C-w&gt;&gt;</code></td>
<td>扩大窗口列数</td>
</tr>
<tr class="odd">
<td><code>&lt;C-w&gt;&lt;</code></td>
<td>减少窗口列数</td>
</tr>
</tbody>
</table>
<h3 id="标签页">标签页</h3>
<table>
<thead>
<tr class="header">
<th>指令</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>:tabedit {file}</code></td>
<td>新标签页编辑文件</td>
</tr>
<tr class="even">
<td><code>:tabnew</code></td>
<td>新标签页编辑新文件</td>
</tr>
<tr class="odd">
<td><code>:tabs</code></td>
<td>列出标签页</td>
</tr>
<tr class="even">
<td><code>:tabclose</code></td>
<td>关闭当前标签页</td>
</tr>
<tr class="odd">
<td><code>:tabonly</code></td>
<td>仅保留当前标签页</td>
</tr>
<tr class="even">
<td><code>:tabn</code></td>
<td><code>:tabnext</code> <code>gt</code> 移动到下一个标签页</td>
</tr>
<tr class="odd">
<td><code>:tabp</code></td>
<td><code>:tabprevious</code> <code>gT</code> 移动到上一个标签页</td>
</tr>
<tr class="even">
<td><code>:tabm :tabmove [N]</code></td>
<td>把当前标签页移到第 N 个标签页之</td>
</tr>
</tbody>
</table>
<h2 id="vimdiff">vimdiff</h2>
<p><code>vimdiff file1 file2</code> 竖屏比较两个文件<br />
<code>vimdiff -o file1 file2</code> 横屏比较两个文件</p>
<p>vimdiff 同 <code>vim -d</code></p>
<p>vim 编辑文件时 <code>:vertical diffsplit file2</code> 亦可比较</p>
<p>两侧的屏幕滚动默认同步，<code>:set noscrollbind</code> 设置不同步</p>
<table>
<thead>
<tr class="header">
<th>指令</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>]c</code></td>
<td>下一个差异点</td>
</tr>
<tr class="even">
<td><code>[c</code></td>
<td>上一个差异点</td>
</tr>
<tr class="odd">
<td><code>dp</code></td>
<td>(diff put) 从当前复制到另一个</td>
</tr>
<tr class="even">
<td><code>do</code></td>
<td>(diff obtain) 从另一个复制到当前</td>
</tr>
<tr class="odd">
<td><code>:diffupdate</code></td>
<td>刷新比较结果</td>
</tr>
<tr class="even">
<td><code>:set diffopt=context:6</code></td>
<td>缺省的上下文行数</td>
</tr>
<tr class="odd">
<td><code>zo</code></td>
<td>打开折叠</td>
</tr>
<tr class="even">
<td><code>zc</code></td>
<td>重新折</td>
</tr>
</tbody>
</table>
<h2 id="vim-终端">vim 终端</h2>
<p><code>:ter[minal]</code> 打开终端</p>
<h2 id="quickfix">quickfix</h2>
<p><code>:make</code> 在 vim 中编译<br />
<code>:make!</code> 出错后光标位置不变</p>
<p>Quickfix 命令列表</p>
<table>
<thead>
<tr class="header">
<th>命令</th>
<th>用途</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>:cnext</code></td>
<td>跳转到下一项</td>
</tr>
<tr class="even">
<td><code>:cprev</code></td>
<td>跳转到上一项</td>
</tr>
<tr class="odd">
<td><code>:cfirst</code></td>
<td>跳转到第一项</td>
</tr>
<tr class="even">
<td><code>:clast</code></td>
<td>跳转到最后一项</td>
</tr>
<tr class="odd">
<td><code>:cnfile</code></td>
<td>跳转到下一个文件中的第一项</td>
</tr>
<tr class="even">
<td><code>:cpfile</code></td>
<td>跳转到上一个文件中的最后一项</td>
</tr>
<tr class="odd">
<td><code>:cc N</code></td>
<td>跳转到第 N 项</td>
</tr>
<tr class="even">
<td><code>:copen</code></td>
<td>打开quickfix窗口</td>
</tr>
<tr class="odd">
<td><code>:cclose</code></td>
<td>关闭quickfix窗口</td>
</tr>
</tbody>
</table>
<h3 id="定制外部编译器">定制外部编译器</h3>
<p><code>:set makeprg=</code> 可用 % # 扩展成当前文件名与轮换文件名</p>
<p>例如，对于markdown 文件, 设置</p>
<pre class="vim"><code>setlocal makeprg=pandoc\ -c\ common.css\ -s\ %\ -o\ ~/www/preview.html</code></pre>
<p>即可通过 <code>:make</code> 生成预览文件</p>
<h2 id="vim-script">vim script</h2>
<h3 id="hello.vim"><code>hello.vim</code></h3>
<pre class="vim"><code>function! SayHello()
    echo &#39;hello, world&#39;
endfunction

command! Hello call SayHello()
nnoremap Q :Hello&lt;CR&gt;</code></pre>
<p>vim 中，使用 <code>:source {path}</code> 加载vim script<br />
<code>Q</code> 和 <code>:Hello</code> 均会输出 “hello, world”</p>
<h3 id="注释">注释</h3>
<pre class="vim"><code>&quot; 单行注释</code></pre>
<h3 id="变量">变量</h3>
<h4 id="作用域">作用域</h4>
<p>let
声明一个变量，变量存在三种作用域，全局、局部、脚本变量，可以指定前缀区别作用域</p>
<table>
<thead>
<tr class="header">
<th>前缀</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>g:</code></td>
<td>全局变量</td>
</tr>
<tr class="even">
<td><code>l:</code></td>
<td>局部变量，只可在函数内部使用</td>
</tr>
<tr class="odd">
<td><code>s:</code></td>
<td>脚本变量，只可以在当前脚本函数内使用</td>
</tr>
<tr class="even">
<td><code>v:</code></td>
<td>Vim 特殊变量</td>
</tr>
<tr class="odd">
<td><code>b:</code></td>
<td>作用域限定在某一个缓冲区内</td>
</tr>
<tr class="even">
<td><code>w:</code></td>
<td>作用域限定在窗口内部</td>
</tr>
<tr class="odd">
<td><code>t:</code></td>
<td>作用域限定在标签内部</td>
</tr>
</tbody>
</table>
<p>例如 <code>let g:str = "hello"</code> 定义一个全局的字符串变量</p>
<p>不指定前缀则为默认的作用域，函数外部为全局的，函数内部为局部的</p>
<h4 id="变量类型">变量类型</h4>
<table>
<thead>
<tr class="header">
<th>类型</th>
<th>ID</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Number</td>
<td>0</td>
<td>整数</td>
</tr>
<tr class="even">
<td>String</td>
<td>1</td>
<td>字符串</td>
</tr>
<tr class="odd">
<td>Funcref</td>
<td>2</td>
<td>函数指针</td>
</tr>
<tr class="even">
<td>List</td>
<td>3</td>
<td>列表</td>
</tr>
<tr class="odd">
<td>Dictionary</td>
<td>4</td>
<td>字典</td>
</tr>
<tr class="even">
<td>Float</td>
<td>5</td>
<td>浮点数</td>
</tr>
<tr class="odd">
<td>Boolean</td>
<td>6</td>
<td></td>
</tr>
<tr class="even">
<td>None</td>
<td>7</td>
<td></td>
</tr>
<tr class="odd">
<td>Job</td>
<td>8</td>
<td></td>
</tr>
<tr class="even">
<td>Channel</td>
<td>9</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="vim-自定义命令">Vim 自定义命令</h3>
<pre class="vim"><code>command! -nargs=* -complete=custom,helloworld#complete HelloWorld call helloworld#test()</code></pre>
<p>紧接 command 命令其后的 !
表示强制定义该命令，即使前面已经定义过了同样名称的命令，也将其覆盖掉</p>
<p><code>-nargs=*</code> 表示，该命令可接受任意个数的参数， 包括 0
个。-nargs 的取值有以下几种情况</p>
<table>
<thead>
<tr class="header">
<th>参数</th>
<th>定义</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>-nargs=0</code></td>
<td>不接受任何参数（默认）</td>
</tr>
<tr class="even">
<td><code>-nagrs=1</code></td>
<td>只接受一个参数</td>
</tr>
<tr class="odd">
<td><code>-nargs=*</code></td>
<td>可接收任意个数参数</td>
</tr>
<tr class="even">
<td><code>-nargs=?</code></td>
<td>可接受 1 个或者 0 个参数</td>
</tr>
<tr class="odd">
<td><code>-nargs=+</code></td>
<td>至少提供一个参数</td>
</tr>
</tbody>
</table>
<p><code>-complete</code> 指定补全方式</p>
<h2 id="插件plugin-包package">插件(plugin), 包(package)</h2>
<h3 id="plugin">plugin</h3>
<p>插件的目录结构</p>
<pre><code>demo-plugin/
├── doc
│   └── demo.txt
└── plugin
    └── demo.vim</code></pre>
<p>安装插件</p>
<pre class="vim"><code>set runtimepath+=$VIMCONFIG/arbitrary/demo-plugin</code></pre>
<h3 id="package">package</h3>
<p>包的目录通常为 <code>$VIMCONFIG/pack</code></p>
<p>vim 启动时会遍历 <code>$VIMCONFIG/pack/*/start</code>
目录下的插件</p>
<p>索引新安装插件的文档 <code>:helptags {path}</code>
<code>:helptags ALL</code></p>
<h3 id="在包里安装插件">在包里安装插件</h3>
<pre class="shell"><code>mkdir -p $VIMCONFIG/pack/bundle/{start,opt}
cd $VIMCONFIG/pack/bundle/start
git clone &lt;git url&gt;
vim -u NONE -c &quot;helptags $VIMCONFIG/pack/bundle/start/&lt;doc-path&gt;&quot; -c q</code></pre>
<p><code>$VIMCONFIG/pack/bundle/opt</code> 目录为可选插件，通过
<code>:packadd {name}</code> 激活插件 <code>pack/*/opt/{name}</code></p>
<h2 id="vim-插件">Vim 插件</h2>
<h3 id="vimcdoc">vimcdoc</h3>
<pre class="shell"><code>git clone https://github.com/yianwillis/vimcdoc.git ~/.vim/pack/bundle/start/vimcdoc</code></pre>
<h3 id="nerdtree">NERDTree</h3>
<pre class="shell"><code>git clone https://github.com/preservim/nerdtree.git ~/.vim/pack/bundle/start/nerdtree
vim -u NONE -c &quot;helptags ~/.vim/pack/bundle/start/nerdtree/doc&quot; -c q</code></pre>
<table>
<thead>
<tr class="header">
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>:NERDTree</code></td>
<td>打开文档树</td>
</tr>
<tr class="even">
<td><code>q</code></td>
<td>退出文档树</td>
</tr>
<tr class="odd">
<td><code>o</code></td>
<td>在之前的窗口打开</td>
</tr>
<tr class="even">
<td><code>go</code></td>
<td>预览, 打开但不跳转</td>
</tr>
<tr class="odd">
<td><code>t</code></td>
<td>新标签页打开</td>
</tr>
<tr class="even">
<td><code>T</code></td>
<td>新标签页打开但不跳转</td>
</tr>
<tr class="odd">
<td><code>i</code></td>
<td>水平分割打开</td>
</tr>
<tr class="even">
<td><code>gi</code></td>
<td>水平分割预览</td>
</tr>
<tr class="odd">
<td><code>s</code></td>
<td>垂直分割打开</td>
</tr>
<tr class="even">
<td><code>gs</code></td>
<td>垂直分割预览</td>
</tr>
<tr class="odd">
<td><code>I</code></td>
<td>显示/关闭 隐藏文件</td>
</tr>
<tr class="even">
<td><code>r</code></td>
<td>刷新当前目录</td>
</tr>
<tr class="odd">
<td><code>C</code></td>
<td>把文档树根目录设为选择的目录</td>
</tr>
<tr class="even">
<td><code>u</code></td>
<td>文档树根目录上移一级</td>
</tr>
<tr class="odd">
<td><code>U</code></td>
<td>同 <code>u</code> 但旧目录保持打开状态</td>
</tr>
<tr class="even">
<td><code>cd</code></td>
<td>设置 CWD 为选中的目录</td>
</tr>
<tr class="odd">
<td><code>CD</code></td>
<td>设置文档树根目录为 CWD</td>
</tr>
<tr class="even">
<td><code>?</code></td>
<td>help</td>
</tr>
</tbody>
</table>
<h3 id="youcompleteme">YouCompleteMe</h3>
<pre class="shell"><code>git clone https://github.com/ycm-core/YouCompleteMe.git ~/.vim/pack/bundle/start/YouCompleteMe
cd ~/.vim/pack/bundle/start/YouCompleteMe
git submodule update --init --recursive
python3 install.py --clangd-completer # or --all</code></pre>
<h3 id="fzf">fzf</h3>
<pre class="shell"><code>sudo apt install fzf
git clone https://github.com/junegunn/fzf ~/.vim/pack/bundle/start/fzf</code></pre>
<table>
<thead>
<tr class="header">
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>:FZF</code></td>
<td>打开模糊匹配器</td>
</tr>
<tr class="even">
<td><code>&lt;C-c&gt;</code></td>
<td>关闭模糊匹配器</td>
</tr>
<tr class="odd">
<td><code>&lt;C-j&gt;</code> <code>down</code></td>
<td>选择匹配结果下一项</td>
</tr>
<tr class="even">
<td><code>&lt;C-k&gt;</code> <code>up</code></td>
<td>选择匹配结果上一项</td>
</tr>
<tr class="odd">
<td><code>&lt;CR&gt;</code></td>
<td>打开当前项</td>
</tr>
<tr class="even">
<td><code>&lt;C-x&gt;</code></td>
<td>水平分割打开文件</td>
</tr>
<tr class="odd">
<td><code>&lt;C-v&gt;</code></td>
<td>垂直分割打开文件</td>
</tr>
<tr class="even">
<td><code>&lt;C-t&gt;</code></td>
<td>新标签页打开</td>
</tr>
</tbody>
</table>
<h3 id="dispatch">dispatch</h3>
<pre class="shell"><code>git clone https://github.com/tpope/vim-dispatch.git ~/.vim/pack/bundle/start/dispatch</code></pre>
<p><code>:Make</code> 前台运行构建程序<br />
<code>:Make!</code> 后台运行构建程序<br />
<code>:Make</code> <code>:Make!</code> 都是异步执行<br />
<code>:Dispatch</code> 切换编译器</p>
<h3 id="commentary">commentary</h3>
<pre class="shell"><code>git clone https://github.com/tpope/vim-commentary.git ~/.vim/pack/bundle/start/commentary</code></pre>
<p><code>:[range]Commentary</code> 快速注释/取消注释</p>
<h3 id="base16-vim">base16-vim</h3>
<pre class="shell"><code>mkdir ~/.vim/colors
git clone https://github.com/chriskempson/base16-vim.git
cp base16-vim/colors/base16-*.vim ~/.vim/colors/</code></pre>
<p><code>:colorscheme {name}</code> 选择配色</p>
<h3 id="airline">airline</h3>
<pre class="shell"><code>git clone https://github.com/vim-airline/vim-airline.git ~/.vim/pack/bundle/start/airline</code></pre>
<h3 id="surround">surround</h3>
<pre class="shell"><code>git clone https://github.com/tpope/vim-surround.git ~/.vim/pack/bundle/start/surround</code></pre>
<ul>
<li>把 <code>"</code> 改为 <code>'</code> 或 <code>&lt;p&gt;</code>:
<code>cs"'</code> <code>cs"&lt;p&gt;</code></li>
<li>删除 <code>"</code>: <code>ds"</code></li>
<li>添加 <code>"</code>: <code>ysiw"</code></li>
<li>整行添加<code>"</code>: <code>yss"</code></li>
</ul>
<h3 id="fugitive">fugitive</h3>
<pre class="shell"><code>git clone https://github.com/tpope/vim-fugitive.git ~/.vim/pack/bundle/start/fugitive</code></pre>
<h3 id="aleasynchronous-lint-engine">ALE(Asynchronous Lint Engine)</h3>
<pre class="shell"><code>git clone https://github.com/dense-analysis/ale.git ~/.vim/pack/bundle/start/ale</code></pre>
<h3 id="grepper">grepper</h3>
<pre class="shell"><code>git clone https://github.com/mhinz/vim-grepper.git ~/.vim/pack/bundle/start/grepper</code></pre>
<h3 id="vim-test">vim-test</h3>
<pre class="shell"><code>git clone https://github.com/vim-test/vim-test.git ~/.vim/pack/bundle/start/vim-test</code></pre>
<h3 id="goyo">goyo</h3>
<pre class="shell"><code>git clone https://github.com/junegunn/goyo.vim.git ~/.vim/pack/bundle/start/goyo</code></pre>
<p><code>:Goyo</code> <code>:Goyo!</code> 切换状态</p>
<h3 id="vim-gutentags">vim-gutentags</h3>
<pre class="shell"><code>git clone https://github.com/ludovicchabant/vim-gutentags.git ~/.vim/pack/bundle/start/vim-gutentags</code></pre>
<h3 id="rainbow">rainbow</h3>
<pre class="shell"><code>git clone https://github.com/luochen1990/rainbow.git ~/.vim/pack/bundle/start/rainbow</code></pre>
<pre class="vim"><code>let g:rainbow_active = 1    &quot; 默认开启
:RainbowToggle      &quot; 切换
:RainbowToggleOn    &quot; 开启
:RainbowToggleOff   &quot; 关闭</code></pre>
<h2 id="neovim">neovim</h2>
<h3 id="安装与使用-1">安装与使用</h3>
<pre class="shell"><code>sudo apt install neovim
nvim [options] [file ...]</code></pre>
<h3 id="配置-1">配置</h3>
<pre class="shell"><code>alias neovim=nvim
export NVIMCONFIG=~/.config/nvim
export NVIMDATA=~/.local/share/nvim</code></pre>
<p>复用 vim 配置，<code>~/.config/nvim/init.vim</code></p>
<pre class="vim"><code>set runtimepath^=~/.vim runtimepath+=~/.vim/after
let &amp;packpath = &amp;runtimepath
source ~/.vim/vimrc</code></pre>
<h3 id="neovim-provider">neovim provider</h3>
<pre class="shell"><code>pip3 install --user --upgrade neovim</code></pre>
<p>neovim 中 <code>:py3 {statement}</code> 启用 python3</p>
<h3 id="neovim-remote">neovim-remote</h3>
<pre class="shell"><code>pip3 install --user --upgrade neovim-remote
nvr --help</code></pre>
<h3 id="neovim-终端模拟器">neovim 终端模拟器</h3>
<p>打开终端缓冲区 <code>:terminal</code>，终端缓冲区输入 <code>i</code>
进入终端模式，再按下 <code>&lt;C-\&gt;&lt;C-n&gt;</code>
回到普通模式</p>
<p>创建终端缓冲区执行命令 <code>:terminal {cmd}</code>，简写为
<code>:te {cmd}</code></p>
<p>新窗口打开终端缓冲区 <code>:[v]split | terminal</code></p>
<p>新标签页打开 <code>:tabedit | terminal</code></p>
<p><code>jobsend()</code> 向终端缓冲区中正在运行的进程的标准输入写入</p>
<p>在当前 neovim 实例中打开文件</p>
<table>
<thead>
<tr class="header">
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>nvr &lt;file&gt;</code></td>
<td>在当前窗口打开</td>
</tr>
<tr class="even">
<td><code>nvr -l &lt;file&gt;</code></td>
<td>在最后激活的窗口打开</td>
</tr>
<tr class="odd">
<td><code>nvr -o &lt;file&gt; [&lt;file&gt;...]</code></td>
<td>通过 <code>:split</code> 打开一个或多个文件</td>
</tr>
<tr class="even">
<td><code>nvr -O &lt;file&gt; [&lt;file&gt;...]</code></td>
<td>通过 <code>:vsplit</code> 打开一个或多个文件</td>
</tr>
<tr class="odd">
<td><code>nvr -p &lt;file&gt; [&lt;file&gt;...]</code></td>
<td>通过 <code>:tabedit</code> 打开一个或多个文件</td>
</tr>
</tbody>
</table>
<p>重命名终端缓冲区 <code>:file {name}</code></p>
<h3 id="参考">参考</h3>
<h4 id="网站">网站</h4>
<ul>
<li><a href="https://www.vim.org/"
class="uri">https://www.vim.org/</a></li>
<li><a href="https://yianwillis.github.io/vimcdoc/doc/help.html"
class="uri">https://yianwillis.github.io/vimcdoc/doc/help.html</a></li>
<li><a href="https://neovim.io/" class="uri">https://neovim.io/</a></li>
</ul>
<h4 id="书籍">书籍</h4>
<ul>
<li><a
href="https://book.douban.com/subject/25869486/">Vim实用技巧</a></li>
<li><a href="https://book.douban.com/subject/35005327/">精通
Vim</a></li>
</ul>
</body>
</html>
