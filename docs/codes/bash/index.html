<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="description" content="选项 -c 命令来自第一个非选项参数，如果命令字符串后面还有参数，第一个参数赋值给$0，后面的参数依次排序，例如执行bash -c &#39;echo $@&#39; 1 2 3 4的输出为2 3 4 -i interactive，交互式 -l 或 --login 让bash的行为类似于登录shell -r 受限的bash -s 如果有 -s 选项，或者如果选项处理完以后，没有参数剩余，那么命令将">
<meta property="og:type" content="article">
<meta property="og:title" content="bash - Bourne Again Shell">
<meta property="og:url" content="https://liph.ink/codes/bash/">
<meta property="og:site_name" content="李鹏华的主页">
<meta property="og:description" content="选项 -c 命令来自第一个非选项参数，如果命令字符串后面还有参数，第一个参数赋值给$0，后面的参数依次排序，例如执行bash -c &#39;echo $@&#39; 1 2 3 4的输出为2 3 4 -i interactive，交互式 -l 或 --login 让bash的行为类似于登录shell -r 受限的bash -s 如果有 -s 选项，或者如果选项处理完以后，没有参数剩余，那么命令将">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2023-09-18T16:00:00.000Z">
<meta property="article:modified_time" content="2023-10-26T07:57:01.234Z">
<meta property="article:author" content="liph">
<meta property="article:tag" content="tools">
<meta name="twitter:card" content="summary">
    
    
      
        
          <link rel="shortcut icon" href="/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>bash - Bourne Again Shell</title>
    <!-- async scripts -->
    <!-- Google Analytics -->


    <!-- Umami Analytics -->


    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
	<!-- mathjax -->
	
<meta name="generator" content="Hexo 6.3.0"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="目录"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="目录"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" aria-label="顶部" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa-solid fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
        <!--
       --><li><a href="/">首页</a></li><!--
     --><!--
       --><li><a href="/readme">关于</a></li><!--
     --><!--
       --><li><a href="/resume">简历</a></li><!--
     --><!--
       --><li><a target="_blank" rel="noopener" href="https://photo.liph.ink">摄影</a></li><!--
     --><!--
       --><li><a href="/archives/">归档</a></li><!--
     --><!--
       --><li><a target="_blank" rel="noopener" href="https://github.com/liphx">项目</a></li><!--
     --><!--
       --><li><a href="/search/">搜索</a></li><!--
     -->
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" aria-label="上一篇" href="/codes/xargs/"><i class="fa-solid fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" aria-label="下一篇" href="/codes/gcc-warning-reorder/"><i class="fa-solid fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="返回顶部" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="分享文章" href="#"><i class="fa-solid fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">上一篇</span>
      <span id="i-next" class="info" style="display:none;">下一篇</span>
      <span id="i-top" class="info" style="display:none;">返回顶部</span>
      <span id="i-share" class="info" style="display:none;">分享文章</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://liph.ink/codes/bash/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://liph.ink/codes/bash/&text=bash - Bourne Again Shell"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://liph.ink/codes/bash/&title=bash - Bourne Again Shell"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://liph.ink/codes/bash/&is_video=false&description=bash - Bourne Again Shell"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=bash - Bourne Again Shell&body=Check out this article: https://liph.ink/codes/bash/"><i class="fa-solid fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://liph.ink/codes/bash/&title=bash - Bourne Again Shell"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://liph.ink/codes/bash/&title=bash - Bourne Again Shell"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://liph.ink/codes/bash/&title=bash - Bourne Again Shell"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://liph.ink/codes/bash/&title=bash - Bourne Again Shell"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://liph.ink/codes/bash/&name=bash - Bourne Again Shell&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://liph.ink/codes/bash/&t=bash - Bourne Again Shell"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    
    
      <div id="toc">
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%89%E9%A1%B9"><span class="toc-number">1.</span> <span class="toc-text">选项</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E6%95%B0"><span class="toc-number">2.</span> <span class="toc-text">参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#builtins"><span class="toc-number">3.</span> <span class="toc-text">builtins</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">3.1.</span> <span class="toc-text">:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#-1"><span class="toc-number">3.2.</span> <span class="toc-text">.</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#break"><span class="toc-number">3.3.</span> <span class="toc-text">break</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#continue"><span class="toc-number">3.4.</span> <span class="toc-text">continue</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#IFS"><span class="toc-number">4.</span> <span class="toc-text">IFS</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#alias"><span class="toc-number">5.</span> <span class="toc-text">alias</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#arithmetic"><span class="toc-number">6.</span> <span class="toc-text">arithmetic</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E7%BB%84"><span class="toc-number">7.</span> <span class="toc-text">数组</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%99%AE%E9%80%9A%E6%95%B0%E7%BB%84"><span class="toc-number">7.1.</span> <span class="toc-text">普通数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E8%81%94%E6%95%B0%E7%BB%84"><span class="toc-number">7.2.</span> <span class="toc-text">关联数组</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Job-Control"><span class="toc-number">8.</span> <span class="toc-text">Job Control</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%85%E5%BB%BA%E5%91%BD%E4%BB%A4-builtin"><span class="toc-number">9.</span> <span class="toc-text">内建命令 builtin</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#case"><span class="toc-number">10.</span> <span class="toc-text">case</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%80%E5%87%BA%E7%8A%B6%E6%80%81"><span class="toc-number">11.</span> <span class="toc-text">退出状态</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#echo-%E6%98%BE%E7%A4%BA%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">12.</span> <span class="toc-text">echo - 显示字符串</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#exec"><span class="toc-number">13.</span> <span class="toc-text">exec</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Shell-%E6%89%A9%E5%B1%95"><span class="toc-number">14.</span> <span class="toc-text">Shell 扩展</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%A7%E6%8B%AC%E5%8F%B7%E6%89%A9%E5%B1%95"><span class="toc-number">14.1.</span> <span class="toc-text">大括号扩展</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A2%E6%B5%AA%E5%8F%B7%E6%89%A9%E5%B1%95"><span class="toc-number">14.2.</span> <span class="toc-text">波浪号扩展</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%82%E6%95%B0%E6%89%A9%E5%B1%95"><span class="toc-number">14.3.</span> <span class="toc-text">参数扩展</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E6%9B%BF%E6%8D%A2"><span class="toc-number">14.4.</span> <span class="toc-text">命令替换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%97%E6%9C%AF%E6%89%A9%E5%B1%95"><span class="toc-number">14.5.</span> <span class="toc-text">算术扩展</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E6%9B%BF%E6%8D%A2"><span class="toc-number">14.6.</span> <span class="toc-text">进程替换</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#History"><span class="toc-number">15.</span> <span class="toc-text">History</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#fc"><span class="toc-number">15.1.</span> <span class="toc-text">fc</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#history"><span class="toc-number">15.2.</span> <span class="toc-text">history</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%BD%E6%95%B0"><span class="toc-number">16.</span> <span class="toc-text">函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E5%AE%9A%E4%B9%89"><span class="toc-number">16.1.</span> <span class="toc-text">函数定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%80%E5%87%BA%E7%8A%B6%E6%80%81-1"><span class="toc-number">16.2.</span> <span class="toc-text">退出状态</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B0%83%E7%94%A8%E5%87%BD%E6%95%B0"><span class="toc-number">16.3.</span> <span class="toc-text">调用函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%92%E5%BD%92"><span class="toc-number">17.</span> <span class="toc-text">递归</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%98%E9%87%8F"><span class="toc-number">18.</span> <span class="toc-text">变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Grouping-Commands"><span class="toc-number">19.</span> <span class="toc-text">Grouping Commands</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%AF%94%E8%BE%83%E4%B8%8E%E6%B5%8B%E8%AF%95"><span class="toc-number">20.</span> <span class="toc-text">比较与测试</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#if"><span class="toc-number">21.</span> <span class="toc-text">if</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%97%E6%9C%AF%E6%AF%94%E8%BE%83"><span class="toc-number">21.1.</span> <span class="toc-text">算术比较</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%9B%B8%E5%85%B3%E6%B5%8B%E8%AF%95"><span class="toc-number">21.2.</span> <span class="toc-text">文件系统相关测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%AF%94%E8%BE%83"><span class="toc-number">21.3.</span> <span class="toc-text">字符串比较</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#test"><span class="toc-number">22.</span> <span class="toc-text">test</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Lists-of-Commands"><span class="toc-number"></span> <span class="toc-text">Lists of Commands</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BE%AA%E7%8E%AF"><span class="toc-number">1.</span> <span class="toc-text">循环</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#for"><span class="toc-number">2.</span> <span class="toc-text">for</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%A2%E5%90%91%E5%88%97%E8%A1%A8%E7%9A%84for%E5%BE%AA%E7%8E%AF"><span class="toc-number">2.1.</span> <span class="toc-text">面向列表的for循环</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%AD%E4%BB%A3%E6%8C%87%E5%AE%9A%E8%8C%83%E5%9B%B4%E7%9A%84%E6%95%B0%E5%AD%97"><span class="toc-number">2.2.</span> <span class="toc-text">迭代指定范围的数字</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#while"><span class="toc-number">3.</span> <span class="toc-text">while</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#until"><span class="toc-number">4.</span> <span class="toc-text">until</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pipeline"><span class="toc-number">5.</span> <span class="toc-text">pipeline</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pwd-print-work-directory"><span class="toc-number">6.</span> <span class="toc-text">pwd - print work directory</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#return"><span class="toc-number">7.</span> <span class="toc-text">return</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#select"><span class="toc-number">8.</span> <span class="toc-text">select</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#set"><span class="toc-number">9.</span> <span class="toc-text">set</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#shell-styleguide"><span class="toc-number">10.</span> <span class="toc-text">shell styleguide</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#time"><span class="toc-number">11.</span> <span class="toc-text">time</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#type"><span class="toc-number">12.</span> <span class="toc-text">type</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%98%E9%87%8F-1"><span class="toc-number">13.</span> <span class="toc-text">变量</span></a></li></ol>
      </div>
    
  </span>
</div>

    
    <div class="content index py4 ">
        
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle p-name" itemprop="name headline">
        bash - Bourne Again Shell
    </h1>



    <div class="meta">
      <span class="author p-author h-card" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span class="p-name" itemprop="name">liph</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2023-09-18T16:00:00.000Z" class="dt-published" itemprop="datePublished">2023-09-19</time>
        
      
    </div>


      

      
    <div class="article-tag">
        <i class="fa-solid fa-tag"></i>
        <a class="p-category" href="/tags/tools/" rel="tag">tools</a>
    </div>


    </div>
  </header>
  

  <div class="content e-content" itemprop="articleBody">
    <h2 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h2><ul>
<li><code>-c</code> 命令来自第一个非选项参数，如果命令字符串后面还有参数，第一个参数赋值给$0，后面的参数依次排序，例如执行<code>bash -c &#39;echo $@&#39; 1 2 3 4</code>的输出为<code>2 3 4</code></li>
<li><code>-i</code> interactive，交互式</li>
<li><code>-l</code> 或 <code>--login</code> 让bash的行为类似于登录shell</li>
<li><code>-r</code> 受限的bash</li>
<li><code>-s</code> 如果有 -s 选项，或者如果选项处理完以后，没有参数剩余，那么命令将从标准输入读取。 这个选项允许在启动一个交互 shell 时可以设置位置参数。</li>
<li><code>-v</code> shell读取的时候打印输入行</li>
<li><code>-x</code> 执行的时候打印命令及参数</li>
<li><code>-D</code> 向标准输出打印一个以 $ 为前导的，以双引号引用的字符串列表。 这是在当前语言环境不是 C 或 POSIX 时，脚本中需要翻译的字符串。 这个选项隐含了 -n 选项；不会执行命令</li>
<li><code>[-+]O [shopt_option]</code> <code>shopt_option</code> 是一个 shopt 内建命令可接受的选项 (参见下面的 shell 内建命令(SHELL BUILTIN COMMANDS) 章节)。 如果有 <code>shopt_option</code>，-O 将设置那个选项的取值； +O 取消它。 如果没有给出 <code>shopt_option</code>，shopt 将在标准输出上打印设为允许的选项的名称和值。 如果启动选项是 +O，输出将以一种可以重用为输入的格式显示。</li>
<li><code>--</code> – 标志选项的结束，禁止其余的选项处理。任何 – 之后的参数将作为文件名和参数对待。参数 - 与此等价</li>
<li>内建命令<code>set</code>中的单字符选项也可以使用</li>
</ul>
<h2 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h2><p>没有指定 -c 或 -s 选项下，第一个参数将假定为一个包含 shell 命令的文件的名字。 如果 bash 是以这种方式启动的， $0 将设置为这个文件的名字，位置参数将设置为剩余的其他参数。 Bash 从这个文件中读取并执行命令，然后退出。 Bash 的退出状态是脚本中执行的最后一个命令的退出状态。 如果没有执行命令，退出状态是0。 尝试的步骤是先试图打开在当前目录中的这个文件，接下来， 如果没有找到，shell 将搜索脚本的 PATH 环境变量中的路径</p>
<h2 id="builtins"><a href="#builtins" class="headerlink" title="builtins"></a>builtins</h2><h3 id=""><a href="#" class="headerlink" title=":"></a>:</h3><p><code>: [arguments]</code></p>
<p>扩展参数，执行重定向外什么也不做，退出状态为0</p>
<h3 id="-1"><a href="#-1" class="headerlink" title="."></a>.</h3><p><code>. filename [arguments]</code></p>
<p>在当前shell上下文中读取和执行的filename中的命令。退出状态是最后执行的命令的退出状态；如果未执行任何命令，则返回零。如果找不到文件名或无法读取文件名，则返回状态为非零。此内置命令等价于<code>source</code></p>
<h3 id="break"><a href="#break" class="headerlink" title="break"></a>break</h3><p><code>break [n]</code></p>
<p>从<code>for</code>, <code>while</code>, <code>until</code> 或 <code>select</code>中退出。 如果提供了n，则退出第n个循环。n必须大于或等于1。返回状态为零，除非n不是大于或等于1。</p>
<h3 id="continue"><a href="#continue" class="headerlink" title="continue"></a>continue</h3><p><code>continue [n]</code></p>
<p>继续循环的下一次迭代，其它同<code>break</code></p>
<h2 id="IFS"><a href="#IFS" class="headerlink" title="IFS"></a>IFS</h2><p>IFS的默认值为空白字符（换行符、制表符或者空格）。</p>
<h2 id="alias"><a href="#alias" class="headerlink" title="alias"></a>alias</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">alias</span>             <span class="comment"># 列出所有别名</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">alias</span> -p          <span class="comment"># 同上</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">alias</span> ll=<span class="string">&#x27;ls -l&#x27;</span>  <span class="comment"># 创建/覆盖别名</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">alias</span> ll          <span class="comment"># 打印别名的名称和值</span></span></span><br><span class="line">alias ll=&#x27;ls -l&#x27;</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">unalias</span> ll        <span class="comment"># 取消别名</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">alias</span> ll</span></span><br><span class="line">bash: alias: ll: not found</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">alias</span> ll=</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">alias</span> ll</span></span><br><span class="line">alias ll=&#x27;&#x27;</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">alias</span> <span class="built_in">ls</span>=<span class="string">&#x27;ls -l&#x27;</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">\<span class="built_in">ls</span>               <span class="comment"># 忽略别名, 执行原本的命令</span></span></span><br></pre></td></tr></table></figure>

<h2 id="arithmetic"><a href="#arithmetic" class="headerlink" title="arithmetic"></a>arithmetic</h2><ul>
<li><code>(( expression ))</code></li>
<li><code>let &quot;expression&quot;</code></li>
</ul>
<p>如果表达式的值非零，则返回状态为0;否则返回状态为1</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">i=0</span><br><span class="line">((i++))</span><br><span class="line">echo $i         # 1</span><br><span class="line">((i = i + 1))</span><br><span class="line">echo $i         # 2</span><br><span class="line">let &quot;i = i * 5&quot;</span><br><span class="line">echo $i         # 10</span><br></pre></td></tr></table></figure>

<h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><h3 id="普通数组"><a href="#普通数组" class="headerlink" title="普通数组"></a>普通数组</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">array_var=(test1 test2 test3 test4) # 这些值将会存储在以0为起始索引的连续位置上</span><br><span class="line">echo $&#123;array_var[0]&#125;                # test1</span><br><span class="line"></span><br><span class="line">array_var[0]=ttt</span><br><span class="line">echo $&#123;array_var[0]&#125;                # ttt</span><br><span class="line"></span><br><span class="line">i=3</span><br><span class="line">echo $&#123;array_var[$i]&#125;               # test4</span><br><span class="line"></span><br><span class="line">array_var[4]=test5</span><br><span class="line">echo $&#123;array_var[*]&#125;                # ttt test2 test3 test4 test5</span><br><span class="line"></span><br><span class="line">array_var[10]=test6</span><br><span class="line">echo $&#123;array_var[*]&#125;                # ttt test2 test3 test4 test5 test6</span><br><span class="line">echo $&#123;array_var[@]&#125;                # ttt test2 test3 test4 test5 test6</span><br><span class="line">echo $&#123;#array_var[*]&#125;               # 6</span><br><span class="line">echo $&#123;!array_var[*]&#125;               # 0 1 2 3 4 10</span><br><span class="line"></span><br><span class="line">array_var[-1]=test7</span><br><span class="line">echo $&#123;array_var[*]&#125;                # ttt test2 test3 test4 test5 test7</span><br><span class="line">echo $&#123;!array_var[*]&#125;               # 0 1 2 3 4 10</span><br><span class="line"></span><br><span class="line">array_var[-2]=test8</span><br><span class="line">echo $&#123;array_var[*]&#125;                # ttt test2 test3 test4 test5 test8 test7</span><br><span class="line">echo $&#123;!array_var[*]&#125;               # 0 1 2 3 4 9 10</span><br></pre></td></tr></table></figure>

<h3 id="关联数组"><a href="#关联数组" class="headerlink" title="关联数组"></a>关联数组</h3><p>首先，需要使用声明语句将一个变量定义为关联数组</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">declare -A ass_array                # 使用声明语句将一个变量定义为关联数组</span><br><span class="line"></span><br><span class="line">ass_array=([index1]=val1 [index2]=val2)</span><br><span class="line">echo $&#123;ass_array[index1]&#125;           # val1</span><br><span class="line"></span><br><span class="line">ass_array[index3]=val3</span><br><span class="line">echo $&#123;ass_array[index3]&#125;           # val3</span><br><span class="line"></span><br><span class="line">echo $&#123;#ass_array[*]&#125;               # 3</span><br><span class="line">echo $&#123;ass_array[*]&#125;                # val1 val3 val2</span><br><span class="line">echo $&#123;!ass_array[*]&#125;               # index1 index3 index2</span><br></pre></td></tr></table></figure>

<h2 id="Job-Control"><a href="#Job-Control" class="headerlink" title="Job Control"></a>Job Control</h2><p><code>bg, fg, jobs, kill, wait, disown, suspend</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./main &amp;</span></span><br><span class="line">[1] 32598</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">jobs</span></span></span><br><span class="line">[1]+  运行中               ./main &amp;</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./main</span></span><br><span class="line">^Z</span><br><span class="line">[2]+  已停止               ./main</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">jobs</span></span></span><br><span class="line">[1]-  运行中               ./main &amp;</span><br><span class="line">[2]+  已停止               ./main</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">bg</span> %2</span></span><br><span class="line">[2]+ ./main &amp;</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">jobs</span></span></span><br><span class="line">[1]-  运行中               ./main &amp;</span><br><span class="line">[2]+  运行中               ./main &amp;</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">fg</span> %2</span></span><br><span class="line">./main</span><br><span class="line">^C</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">kill</span> %1</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">[1]+  已终止               ./main</span></span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./main &amp;</span></span><br><span class="line">[1] 32679</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">disown</span> %1</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">jobs</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">pgrep main</span></span><br><span class="line">32679</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">kill</span> -l</span></span><br><span class="line"> 1) SIGHUP  2) SIGINT  3) SIGQUIT  4) SIGILL  5) SIGTRAP</span><br><span class="line"> 6) SIGABRT  7) SIGBUS  8) SIGFPE  9) SIGKILL 10) SIGUSR1</span><br><span class="line">11) SIGSEGV 12) SIGUSR2 13) SIGPIPE 14) SIGALRM 15) SIGTERM</span><br><span class="line">16) SIGSTKFLT 17) SIGCHLD 18) SIGCONT 19) SIGSTOP 20) SIGTSTP</span><br><span class="line">21) SIGTTIN 22) SIGTTOU 23) SIGURG 24) SIGXCPU 25) SIGXFSZ</span><br><span class="line">26) SIGVTALRM 27) SIGPROF 28) SIGWINCH 29) SIGIO 30) SIGPWR</span><br><span class="line">31) SIGSYS 34) SIGRTMIN 35) SIGRTMIN+1 36) SIGRTMIN+2 37) SIGRTMIN+3</span><br><span class="line">38) SIGRTMIN+4 39) SIGRTMIN+5 40) SIGRTMIN+6 41) SIGRTMIN+7 42) SIGRTMIN+8</span><br><span class="line">43) SIGRTMIN+9 44) SIGRTMIN+10 45) SIGRTMIN+11 46) SIGRTMIN+12 47) SIGRTMIN+13</span><br><span class="line">48) SIGRTMIN+14 49) SIGRTMIN+15 50) SIGRTMAX-14 51) SIGRTMAX-13 52) SIGRTMAX-12</span><br><span class="line">53) SIGRTMAX-11 54) SIGRTMAX-10 55) SIGRTMAX-9 56) SIGRTMAX-8 57) SIGRTMAX-7</span><br><span class="line">58) SIGRTMAX-6 59) SIGRTMAX-5 60) SIGRTMAX-4 61) SIGRTMAX-3 62) SIGRTMAX-2</span><br><span class="line">63) SIGRTMAX-1 64) SIGRTMAX</span><br></pre></td></tr></table></figure>

<h2 id="内建命令-builtin"><a href="#内建命令-builtin" class="headerlink" title="内建命令 builtin"></a>内建命令 builtin</h2><ul>
<li>内建命令不需要使用子进程来执行，包括<code>cd</code>, <code>exit</code>, <code>type</code>, <code>alias</code>, <code>.</code>, <code>echo</code>, <code>history</code>等</li>
</ul>
<h2 id="case"><a href="#case" class="headerlink" title="case"></a>case</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">case word in</span><br><span class="line">    [ [(] pattern [| pattern]…) command-list ;;]…</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">read ans</span><br><span class="line">case $ans in</span><br><span class="line">    y | Y | yes | YES)</span><br><span class="line">    echo &#x27;YES&#x27;</span><br><span class="line">    ;;</span><br><span class="line">    n | N | no | NO)</span><br><span class="line">    echo &#x27;NO&#x27;</span><br><span class="line">    ;;</span><br><span class="line">    *)</span><br><span class="line">    echo &#x27;??&#x27;</span><br><span class="line">    ;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>

<p>每个case子句以<code>;;</code>， <code>;&amp;</code> 或 <code>;;&amp;</code>结束</p>
<ul>
<li><code>;;</code>     在第一次模式匹配之后不尝试后续匹配</li>
<li><code>;&amp;</code>     在第一次模式匹配之后继续执行下一条子句</li>
<li><code>;;&amp;</code>     在第一次模式匹配之后继续匹配，并在匹配的子句处往下执行</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">read ans</span><br><span class="line">case $ans in</span><br><span class="line">    1)</span><br><span class="line">    echo 1;</span><br><span class="line">    ;&amp;          # 输入1，输出为1 2</span><br><span class="line">    2)</span><br><span class="line">    echo 2;     # 输入2，输出为2</span><br><span class="line">    ;;</span><br><span class="line">    3)</span><br><span class="line">    echo 3;     # 输入3，输出为3 ??</span><br><span class="line">    ;;&amp;</span><br><span class="line">    *)</span><br><span class="line">    echo &#x27;??&#x27;</span><br><span class="line">    ;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>

<p>类比C语言的<code>switch</code>， <code>;;</code> 即 C语言中的<code>break</code>， <code>;&amp;</code>为不加<code>break</code>的分支，<code>;;&amp;</code>则再进行一次匹配</p>
<h2 id="退出状态"><a href="#退出状态" class="headerlink" title="退出状态"></a>退出状态</h2><p>如果没有匹配项，退出状态为0，否则为执行命令的退出状态</p>
<h2 id="echo-显示字符串"><a href="#echo-显示字符串" class="headerlink" title="echo - 显示字符串"></a>echo - 显示字符串</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">type</span> <span class="built_in">echo</span></span></span><br><span class="line">echo 是 shell 内建</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> <span class="string">&quot;hello,  world.&quot;</span></span></span><br><span class="line">hello,  world.</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> hello,  world</span></span><br><span class="line">hello, world</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> <span class="variable">$0</span></span></span><br><span class="line">/bin/bash</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> $?</span></span><br><span class="line">0</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> $$</span></span><br><span class="line">4728</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> <span class="variable">$HOME</span></span></span><br><span class="line">/home/liph</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> `<span class="built_in">date</span> +%F`</span></span><br><span class="line">2020-07-13</span><br></pre></td></tr></table></figure>

<p>选项</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">-n     不输出尾随的换行符</span><br><span class="line">-E     禁用解释反斜杠的转义功能（默认）</span><br><span class="line">-e     启用解释反斜杠的转义功能</span><br><span class="line">  若 -e 可用，则以下序列即可识别：</span><br><span class="line"> \\     反斜线</span><br><span class="line"> \a     报警符(BEL)</span><br><span class="line"> \b     退格符</span><br><span class="line"> \c     禁止尾随的换行符</span><br><span class="line"> \e     escape 字符</span><br><span class="line"> \f     换页符</span><br><span class="line"> \n     另起一行</span><br><span class="line"> \r     回到行首</span><br><span class="line"> \t     水平制表符</span><br><span class="line"> \v     垂直制表符</span><br><span class="line"> \0NNN  字节数以八进制数 NNN (1至3位)表示</span><br><span class="line"> \xHH   字节数以十六进制数 HH (1至2位)表示</span><br></pre></td></tr></table></figure>

<h2 id="exec"><a href="#exec" class="headerlink" title="exec"></a>exec</h2><p>exec命令创建全新的文件描述符</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">exec 3&lt;input.txt    #使用文件描述符3打开并读取文件</span><br><span class="line">exec 4&gt;output.txt   #打开文件进行写入</span><br><span class="line">exec 5&gt;&gt;input.txt</span><br></pre></td></tr></table></figure>

<h2 id="Shell-扩展"><a href="#Shell-扩展" class="headerlink" title="Shell 扩展"></a>Shell 扩展</h2><p>Shell有7种扩展，扩展的顺序是大括号扩展；波浪号扩展；参数和变量扩展；算术扩展；命令替换；单词拆分；文件名扩展。如果系统支持，还有一种扩展：进程替换，它和波浪号、参数、变量、算术扩展以及命令替换是同时进行的。</p>
<h3 id="大括号扩展"><a href="#大括号扩展" class="headerlink" title="大括号扩展"></a>大括号扩展</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> a&#123;a,b,c&#125;</span></span><br><span class="line">aa ab ac</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> 0&#123;1..9&#125;</span></span><br><span class="line">01 02 03 04 05 06 07 08 09</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> 0&#123;1..9..3&#125;</span></span><br><span class="line">01 04 07</span><br></pre></td></tr></table></figure>

<h3 id="波浪号扩展"><a href="#波浪号扩展" class="headerlink" title="波浪号扩展"></a>波浪号扩展</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">~           /home/liph</span><br><span class="line">~liph       /home/liph</span><br><span class="line">~root       /root</span><br><span class="line">~/tmp       /home/liph/tmp</span><br><span class="line">~+          $PWD</span><br><span class="line">~-          $OLDPWD</span><br><span class="line">~N          dirs +N</span><br><span class="line">~+N         dirs +N</span><br><span class="line">~-N         dirs -N</span><br></pre></td></tr></table></figure>

<h3 id="参数扩展"><a href="#参数扩展" class="headerlink" title="参数扩展"></a>参数扩展</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="variable">$&#123;parameter:−word&#125;</span>    如果参数没有设置或为空，替换为单词；否则为参数</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="variable">$&#123;parameter:=word&#125;</span>    如果参数没有设置或为空，把单词赋值给参数</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="variable">$&#123;parameter:?word&#125;</span>    如果参数没有设置或为空，把单词写到标准错误，退出shell</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="variable">$&#123;parameter:+word&#125;</span>    如果参数没有设置或为空，不进行任何替换；否则替换为单词</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="variable">$&#123;parameter:offset&#125;</span>   参数:偏移量</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="variable">$&#123;parameter:offset:length&#125;</span> 参数:偏移量:长度，如果长度是负数，则表示结尾的偏移量</span></span><br><span class="line"></span><br><span class="line">str=&#x27;hello, world&#x27;</span><br><span class="line">echo $&#123;#str&#125;            # 12, 长度</span><br><span class="line">echo $&#123;str:0:$&#123;#str&#125;&#125;   # hello, world</span><br><span class="line">echo $&#123;str:1&#125;           # ello, world</span><br><span class="line">echo $&#123;str:1:-1&#125;        # ello, worl</span><br><span class="line">echo $&#123;str:-1&#125;          # hello, world</span><br><span class="line"></span><br><span class="line">echo $&#123;var&#125;             #</span><br><span class="line">echo $&#123;var:-abc&#125;        # abc</span><br><span class="line">echo $&#123;var&#125;             #</span><br><span class="line">echo $&#123;var:=abc&#125;        # abc</span><br><span class="line">echo $&#123;var&#125;             # abc</span><br><span class="line">echo $&#123;var:=bcd&#125;        # abc</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="built_in">echo</span> <span class="variable">$&#123;new:?bcd&#125;</span></span></span><br><span class="line">echo $&#123;var:?bcd&#125;        # abc</span><br><span class="line"></span><br><span class="line">echo $&#123;var2:+bcd&#125;</span><br><span class="line">echo $&#123;var:+bcd&#125;        # bcd</span><br><span class="line">echo $&#123;var&#125;             # abc</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="variable">$&#123;!prefix*&#125;</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="variable">$&#123;!prefix@&#125;</span> 扩展为名称中含有前缀的变量，以IFS的第一个字符分隔。如果使用了@，并且在双引号内扩展，则每个变量都扩展成单独的单词</span></span><br><span class="line">var1=hello</span><br><span class="line">var2=world</span><br><span class="line">echo $&#123;!var*&#125;           # var1 var2</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="variable">$&#123;!name[@]&#125;</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="variable">$&#123;!name[*]&#125;</span> 如果名称是个数组，扩展成数组下标或者key列表</span></span><br><span class="line">array=(a b c)</span><br><span class="line">echo $&#123;!array[*]&#125;       # 0 1 2</span><br><span class="line">array[100]=xyz</span><br><span class="line">echo $&#123;!array[*]&#125;       # 0 1 2 100</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="variable">$&#123;#parameter&#125;</span> 参数扩展后的字符数，如果是带下标*/@的数组名，则为数组中的元素个数</span></span><br><span class="line">echo $&#123;#var1&#125;           # 5</span><br><span class="line">echo $&#123;#array[*]&#125;       # 4</span><br><span class="line">echo $&#123;#array&#125;          # 1</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="variable">$&#123;parameter#word&#125;</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="variable">$&#123;parameter##word&#125;</span> 单词被扩展成一个模式，如果模式匹配参数扩展后的开始部分，则替换的结果是该模式最短(<span class="comment">#)或最长(##)匹配参数扩展的部分被删除后的字符串</span></span></span><br><span class="line">var=&#x27;a1a1a1&#x27;</span><br><span class="line">echo $&#123;var#a*a&#125;       # 1a1</span><br><span class="line">echo $&#123;var##a*a&#125;      # 1</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="variable">$&#123;parameter%word&#125;</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="variable">$&#123;parameter%%word&#125;</span> 同上，从后匹配</span></span><br><span class="line">echo $&#123;var%1*1&#125;       # a1a</span><br><span class="line">echo $&#123;var%%1*1&#125;      # a</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="variable">$&#123;parameter/pattern/string&#125;</span></span></span><br><span class="line">var=0a1a</span><br><span class="line">echo $&#123;var/a/A&#125;     # 0A1a 替换第一个</span><br><span class="line">echo $&#123;var//a/A&#125;    # 0A1A 全替换</span><br><span class="line">echo $&#123;var/#a/A&#125;    # 0a1a 替换开头的第一个</span><br><span class="line">echo $&#123;var/%a/A&#125;    # 0a1A 替换结尾的第一个</span><br><span class="line">echo $&#123;var/a/&#125;      # 01a</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="variable">$&#123;parameter^pattern&#125;</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="variable">$&#123;parameter^^pattern&#125;</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="variable">$&#123;parameter,pattern&#125;</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="variable">$&#123;parameter,,pattern&#125;</span> 大小写替换</span></span><br><span class="line">var=abCD</span><br><span class="line">echo $&#123;var^*&#125;   # AbCD</span><br><span class="line">echo $&#123;var^^*&#125;  # ABCD</span><br><span class="line">echo $&#123;var,*&#125;   # abCD, 把a替换小写，无变化</span><br><span class="line">echo $&#123;var,,*&#125;  # abcd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="variable">$&#123;parameter@operator&#125;</span> Q E P A a</span></span><br><span class="line">var=abc\ d</span><br><span class="line">echo $&#123;var@Q&#125;   # &#x27;abc d&#x27;, 即quote</span><br><span class="line">echo $&#123;var@E&#125;   # abc d, 即escape</span><br><span class="line">var=&#x27;\u&#x27;</span><br><span class="line">echo $&#123;var@P&#125;   # liph, 即prompt, 按PS1方式展开</span><br><span class="line">echo $&#123;var@A&#125;   # var=&#x27;\u&#x27;, 即assignment</span><br><span class="line">readonly var</span><br><span class="line">echo $&#123;var@A&#125;   # declare -r var=&#x27;\u&#x27;</span><br><span class="line">echo $&#123;var@a&#125;   # r, 即attribute，获取属性</span><br></pre></td></tr></table></figure>

<h3 id="命令替换"><a href="#命令替换" class="headerlink" title="命令替换"></a>命令替换</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(cmd) or `cmd`</span><br></pre></td></tr></table></figure>

<h3 id="算术扩展"><a href="#算术扩展" class="headerlink" title="算术扩展"></a>算术扩展</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(( exp ))</span><br></pre></td></tr></table></figure>

<h3 id="进程替换"><a href="#进程替换" class="headerlink" title="进程替换"></a>进程替换</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;(list)    or    &gt;(list)</span><br><span class="line"></span><br><span class="line">&#x27;&lt;&#x27; 或 &#x27;&gt;&#x27; 与左边括号之间不能有空格，否则会被解释成重定向</span><br></pre></td></tr></table></figure>

<h2 id="History"><a href="#History" class="headerlink" title="History"></a>History</h2><p><code>fc, history</code></p>
<h3 id="fc"><a href="#fc" class="headerlink" title="fc"></a>fc</h3><p><code>fc [-e ename] [-lnr] [first] [last]</code></p>
<p>从历史列表中列出或者重新编辑并执行命令。<br>FIRST 和 LAST 变量可以是数字用于指定范围，或者 FIRST 可以是字符串，意味着以这个字符串打头的最近的一个命令</p>
<ul>
<li>-e 编辑器， 如果不指定则为 <code>$&#123;FCEDIT:-$&#123;EDITOR:-vi&#125;&#125;</code></li>
<li>-l 列出行而不编辑</li>
<li>-n 列举时省略行号</li>
<li>-r 反转行的顺序(最新行在前)</li>
</ul>
<p><code>fc -s [pat=rep] [command]</code></p>
<p>命令会在替换之后被重新执行</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sduo apt update</span></span><br><span class="line">bash: sduo：未找到命令</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">fc</span> -s sduo=sudo</span></span><br><span class="line">sudo apt update</span><br></pre></td></tr></table></figure>

<h3 id="history"><a href="#history" class="headerlink" title="history"></a>history</h3><p><code>history [n]</code> 列出最后n行历史命令，每个被修改的条目加上 <code>*</code> 前缀</p>
<p><code>history -c</code> 删除所有条目从而清空历史列表</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">history</span> -c</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">history</span></span></span><br><span class="line">    1  history</span><br></pre></td></tr></table></figure>

<p><code>history -d offset</code> 从指定位置删除历史列表。负偏移量将从历史条目末尾开始计数</p>
<p><code>history -d start-end</code> 删除start 与 end 之间的历史列表</p>
<p><code>history [-anrw] [filename]</code></p>
<ul>
<li>-a    将当前会话的历史行追加到历史文件中</li>
<li>-n    从历史文件中读取所有未被读取的行并且将它们附加到历史列表</li>
<li>-r    读取历史文件并将内容追加到历史列表中</li>
<li>-w    将当前历史写入到历史文件中</li>
</ul>
<p><code>history -ps arg</code></p>
<ul>
<li>-p 对每一个 ARG 参数展开历史并显示结果，而不存储到历史列表中</li>
<li>-s 以单条记录追加 ARG 到历史列表中</li>
</ul>
<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><h3 id="函数定义"><a href="#函数定义" class="headerlink" title="函数定义"></a>函数定义</h3><ul>
<li><code>name () compound-command [ redirections ]</code></li>
<li><code>function name [()] compound-command [ redirections ]</code></li>
</ul>
<p>复合命令<code>(Compound Commands)</code>包括循环，条件与组分组命令<code>(Grouping Commands)</code></p>
<h3 id="退出状态-1"><a href="#退出状态-1" class="headerlink" title="退出状态"></a>退出状态</h3><p>函数定义的退出状态为零，除非出现语法错误或已存在同名的只读函数。在执行时，如果给定一个数值参数返回<code>(return)</code>，这是函数的返回状态；否则，函数的返回状态是返回前执行的最后一个命令的退出状态<br>。</p>
<h3 id="调用函数"><a href="#调用函数" class="headerlink" title="调用函数"></a>调用函数</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fname; # 使用函数名执行函数</span><br><span class="line">fname arg1 arg2; # 传递参数</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function func()</span><br><span class="line">&#123;</span><br><span class="line">    echo $1;</span><br><span class="line">    echo &quot;$@&quot;;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line">func hello world;</span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hello</span><br><span class="line">hello world</span><br></pre></td></tr></table></figure>

<p>其中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$0是脚本名称。</span><br><span class="line">$1是第一个参数。</span><br><span class="line">$2是第二个参数。</span><br><span class="line">$n是第n个参数。</span><br><span class="line">&quot;$@&quot;被扩展成&quot;$1&quot;&quot;$2&quot;&quot;$3&quot;等。</span><br><span class="line">&quot;$*&quot;被扩展成&quot;$1c$2c$3&quot;，其中c是IFS的第一个字符。</span><br><span class="line">&quot;$@&quot;要比&quot;$*&quot;用得多。由于&quot;$*&quot;将所有的参数当作单个字符串，因此它很少被使用。</span><br></pre></td></tr></table></figure>

<h2 id="递归"><a href="#递归" class="headerlink" title="递归"></a>递归</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function func()</span><br><span class="line">&#123;</span><br><span class="line">    echo hello;</span><br><span class="line">    sleep 1;</span><br><span class="line">    func;</span><br><span class="line">&#125;</span><br><span class="line">func;</span><br></pre></td></tr></table></figure>

<p>bash也支持递归函数，自身调用自己（或循环调用）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:()&#123; :|:&amp; &#125;;: # fork 炸弹，&quot;:&quot; 可作为函数名</span><br></pre></td></tr></table></figure>

<h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><p>使用<code>local</code>定义变量将仅对函数及其调用的命令可见</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">func1()</span><br><span class="line">&#123;</span><br><span class="line">    local var=&#x27;func1 local&#x27;</span><br><span class="line">    func2</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func2()</span><br><span class="line">&#123;</span><br><span class="line">    echo &quot;In func2, var = $var&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var=global</span><br><span class="line">func1           # =&gt; In func2, var = func1 local</span><br></pre></td></tr></table></figure>

<h2 id="Grouping-Commands"><a href="#Grouping-Commands" class="headerlink" title="Grouping Commands"></a>Grouping Commands</h2><p><code>( list )</code></p>
<p>在圆括号之间放置一列命令将创建一个子shell环境，列表中的每个命令将在该子shell中执行。由于该列表是在子shell中执行的，所以在子shell完成后，变量分配将不再有效。</p>
<p><code>&#123; list; &#125;</code></p>
<p>在花括号之间放置一个命令列表将导致该列表在当前shell上下文中执行。不创建子shell。必须使用列表后面的分号(或换行符)。</p>
<p>此外，大括号是保留字，因此必须用空格或其他shell元字符将它们与列表分隔开。括号是操作符，即使它们与列表之间没有空格，shell也会将它们识别为单独的标记。这两个构造的退出状态都是list的退出状态。</p>
<h2 id="比较与测试"><a href="#比较与测试" class="headerlink" title="比较与测试"></a>比较与测试</h2><h2 id="if"><a href="#if" class="headerlink" title="if"></a>if</h2><p>用法</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if condition;</span><br><span class="line">then</span><br><span class="line">    commands;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<p>以及</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">if condition;</span><br><span class="line">then</span><br><span class="line">    commands;</span><br><span class="line">elif condition;</span><br><span class="line">then</span><br><span class="line">    commands;</span><br><span class="line">else</span><br><span class="line">    commands;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<h3 id="算术比较"><a href="#算术比较" class="headerlink" title="算术比较"></a>算术比较</h3><p>比较条件通常被放置在封闭的中括号内。一定要注意在[ 或 ]与操作数之间有一个空格。如果忘记了这个空格，脚本就会报错。</p>
<p>对变量或值进行算术条件测试：</p>
<p><code>[ $var -eq 0 ]</code>  当$var等于0时，返回真<br><code>[ $var -ne 0 ]</code>  当$var不为0时，返回真</p>
<p>其他重要的操作符如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-gt：大于。</span><br><span class="line">-lt：小于。</span><br><span class="line">-ge：大于或等于。</span><br><span class="line">-le：小于或等于。</span><br></pre></td></tr></table></figure>

<p>-a是逻辑与操作符，-o是逻辑或操作符。可以按照下面的方法结合多个条件进行测试：<code>[ $var1 -ne 0 -a $var2 -gt 2 ]</code> 以及 <code>[ $var1 -ne 0 -o $var2 -gt 2 ]</code></p>
<h3 id="文件系统相关测试"><a href="#文件系统相关测试" class="headerlink" title="文件系统相关测试"></a>文件系统相关测试</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[ -f $file_var ]：如果给定的变量包含正常的文件路径或文件名，则返回真。</span><br><span class="line">[ -x $var ]：如果给定的变量包含的文件可执行，则返回真。</span><br><span class="line">[ -d $var ]：如果给定的变量包含的是目录，则返回真。</span><br><span class="line">[ -e $var ]：如果给定的变量包含的文件存在，则返回真。</span><br><span class="line">[ -c $var ]：如果给定的变量包含的是一个字符设备文件的路径，则返回真。</span><br><span class="line">[ -b $var ]：如果给定的变量包含的是一个块设备文件的路径，则返回真。</span><br><span class="line">[ -w $var ]：如果给定的变量包含的文件可写，则返回真。</span><br><span class="line">[ -r $var ]：如果给定的变量包含的文件可读，则返回真。</span><br><span class="line">[ -L $var ]：如果给定的变量包含的是一个符号链接，则返回真。</span><br></pre></td></tr></table></figure>

<h3 id="字符串比较"><a href="#字符串比较" class="headerlink" title="字符串比较"></a>字符串比较</h3><p>进行字符串比较时，最好用双中括号，因为有时候采用单个中括号会产生错误。双中括号是Bash的一个扩展特性。如果出于性能考虑，使用ash或dash来运行脚本，那么将无法使用该特性。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[[ $str1 = $str2 ]]：当str1等于str2时，返回真。也就是说，str1和str2包含的文本是一模一样的。</span><br><span class="line">[[ $str1 == $str2 ]]：这是检查字符串是否相同的另一种写法。测试两个字符串是否不同。</span><br><span class="line">[[ $str1 != $str2 ]]：如果str1和str2不相同，则返回真。</span><br><span class="line">[[ $str1 &gt; $str2 ]]：如果str1的字母序比str2大，则返回真。</span><br><span class="line">[[ $str1 &lt; $str2 ]]：如果str1的字母序比str2小，则返回真。</span><br><span class="line">[[ -z $str1 ]]：如果str1为空串，则返回真。</span><br><span class="line">[[ -n $str1 ]]：如果str1不为空串，则返回真。</span><br></pre></td></tr></table></figure>

<h2 id="test"><a href="#test" class="headerlink" title="test"></a>test</h2><p>test命令可以用来测试条件。用test可以避免使用过多的括号，增强代码的可读性。[]中的测试条件同样可以用于test命令。</p>
<p><code>if  [ $var -eq 0 ]; then echo &quot;True&quot;; fi</code> 可以写<code>if  test $var -eq 0 ; then echo &quot;True&quot;; fi</code></p>
<p>test是一个外部程序，需要衍生出对应的进程，而 [ 是Bash的一个内部函数，因此后者的执行效率更高。test兼容于Bourne shell、ash、dash等。</p>
<h1 id="Lists-of-Commands"><a href="#Lists-of-Commands" class="headerlink" title="Lists of Commands"></a>Lists of Commands</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cmd1 &amp;&amp; cmd2    # 当且仅当cmd1退出状态为0才执行cmd2</span><br><span class="line">cmd1 || cmd2    # 当且仅当cmd1退出状态不为0才执行cmd2</span><br><span class="line">cmd1 ; cmd2     # 按顺序执行cmd1，cmd2</span><br><span class="line">cmd &amp;           # 后台异步执行cmd</span><br></pre></td></tr></table></figure>

<p>优先级 &amp;&amp; 和 || 相同，优于优先级相同的 ; 和 &amp;</p>
<h2 id="循环"><a href="#循环" class="headerlink" title="循环"></a>循环</h2><h2 id="for"><a href="#for" class="headerlink" title="for"></a>for</h2><p><code>for name [ [in [lists …] ] ; ] do commands; done</code><br><code>for (( expr1 ; expr2 ; expr3 )) ; do commands ; done</code></p>
<h3 id="面向列表的for循环"><a href="#面向列表的for循环" class="headerlink" title="面向列表的for循环"></a>面向列表的for循环</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">for var in list;</span><br><span class="line">do</span><br><span class="line">    commands;</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<p>list可以是一个字符串，也可以是一个值序列</p>
<p>值序列 <code>&#123;A..Z&#125;</code>, <code>&#123;0..9&#125; &#123;a..z&#125;</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> &#123;A..Z&#125;</span></span><br><span class="line">A B C D E F G H I J K L M N O P Q R S T U V W X Y Z</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> &#123;a..z&#125; &#123;0..9&#125;</span></span><br><span class="line">a b c d e f g h i j k l m n o p q r s t u v w x y z 0 1 2 3 4 5 6 7 8 9</span><br></pre></td></tr></table></figure>

<p>如果不指定<code>in lists</code>，默认为<code>in $@</code></p>
<h3 id="迭代指定范围的数字"><a href="#迭代指定范围的数字" class="headerlink" title="迭代指定范围的数字"></a>迭代指定范围的数字</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">for((i=0; i&lt;10; i++))</span><br><span class="line">&#123;</span><br><span class="line">    commands;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="while"><a href="#while" class="headerlink" title="while"></a>while</h2><p><code>while test-commands; do consequent-commands; done</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">while true;</span><br><span class="line">do</span><br><span class="line">    commands;</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<p>用true作为循环条件能够产生无限循环</p>
<h2 id="until"><a href="#until" class="headerlink" title="until"></a>until</h2><p><code>until test-commands; do consequent-commands; done</code></p>
<p>until会一直循环，直到给定的条件为真。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">x=0;</span><br><span class="line">until [ $x -eq 9 ];</span><br><span class="line">do</span><br><span class="line">    let x++;</span><br><span class="line">    echo $x;</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<p>无限循环 <code>while true; do cmd; done</code> 等价于 <code>until false; do cmd; done</code></p>
<p>三种循环都可以使用<code>break</code>，<code>continue</code>来控制</p>
<h2 id="pipeline"><a href="#pipeline" class="headerlink" title="pipeline"></a>pipeline</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cmd1 | cmd2     # cmd1的标准输出成为cmd2的标准输入</span><br><span class="line">cmd1 |&amp; cmd2    # cmd1的标准输出、标准错误成为cmd2的标准输入，类似于cmd1 2&gt;&amp;1 | cmd2</span><br></pre></td></tr></table></figure>

<p>未开启<code>pipefail</code>选项下，管道的退出状态是最后一条命令的退出状态</p>
<h2 id="pwd-print-work-directory"><a href="#pwd-print-work-directory" class="headerlink" title="pwd - print work directory"></a>pwd - print work directory</h2><p>输出当前工作目录的完整名称</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">type</span> -a <span class="built_in">pwd</span></span></span><br><span class="line">pwd 是 shell 内建</span><br><span class="line">pwd 是 /usr/bin/pwd</span><br><span class="line">pwd 是 /bin/pwd</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">pwd</span></span></span><br><span class="line">/home/liph</span><br></pre></td></tr></table></figure>

<h2 id="return"><a href="#return" class="headerlink" title="return"></a>return</h2><p><code>return [n]</code></p>
<p>用来退出函数并指定退出状态，如果没用指定n，退出状态为函数执行的最后一条命令的退出状态</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">return</span></span></span><br><span class="line">bash: return: 只能从函数或者源脚本返回(`return&#x27;)</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> test.sh</span></span><br><span class="line">return</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">bash test.sh</span></span><br><span class="line">test.sh: 第 1 行：return: 只能从函数或者源脚本返回(`return&#x27;)</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">source</span> test.sh</span></span><br></pre></td></tr></table></figure>

<p>在终端中输入<code>return</code>，得到提示<code>return</code>只能在函数或由 <code>.</code> 和<code>source</code>命令执行的脚本中使用</p>
<h2 id="select"><a href="#select" class="headerlink" title="select"></a>select</h2><p><code>select name [in words …]; do commands; done</code></p>
<p>如果省略<code>in words</code>，则会指定<code>in $@</code></p>
<p>创建菜单供用户选择</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;select your linux distribution&quot;</span><br><span class="line">linux=&quot;Debian Centos Ubuntu Arch&quot;</span><br><span class="line">select os in $linux:</span><br><span class="line">do</span><br><span class="line">    echo &quot;your select is $&#123;REPLY&#125;, $os is the best!&quot;</span><br><span class="line">    break;</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">bash select.sh</span></span><br><span class="line">select your linux distribution</span><br><span class="line">1) Debian</span><br><span class="line">2) Centos</span><br><span class="line">3) Ubuntu</span><br><span class="line">4) Arch:</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">? 1</span></span><br><span class="line">your select is 1, Debian is the best!</span><br></pre></td></tr></table></figure>

<h2 id="set"><a href="#set" class="headerlink" title="set"></a>set</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">set [--abefhkmnptuvxBCEHPT] [-o option-name] [argument …]</span><br><span class="line">set [+abefhkmnptuvxBCEHPT] [+o option-name] [argument …]</span><br></pre></td></tr></table></figure>

<p>如果不指定参数，<code>set</code>会打印出所有变量与函数</p>
<p>选项</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-e  如果命令退出状态非0，立即退出shell</span><br><span class="line">-x  执行命令前先打印（先扩展变量`PS4`后打印命令）</span><br><span class="line">+x  禁止调试</span><br><span class="line">-v  当命令进行读取时显示输入</span><br><span class="line">+v  禁止打印输入</span><br><span class="line">-u  视未设置的变量和参数（特殊参数@或*除外）为错误，在标准错误写入错误信息，并退出非交互运行的shell</span><br><span class="line">-o</span><br><span class="line">    pipefail  只要管道中有任何一个命令返回非0，则整个管道操作被视为失败</span><br></pre></td></tr></table></figure>

<p>使用选项-x，启用shell脚本的跟踪调试功能：<code>$ bash -x script.sh</code></p>
<p>使用set -x和set +x对脚本进行部分调试</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">for i in &#123;1..6&#125;;</span><br><span class="line">do</span><br><span class="line">    set -x</span><br><span class="line">    echo $i</span><br><span class="line">    set +x</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<p>把shebang从#!&#x2F;bin&#x2F;bash改成#!&#x2F;bin&#x2F;bash -xv，这样一来，不用任何其他选项就可以启用调试功能了</p>
<p>如果使用了-x -v或set -x -v，调试输出会被发送到stderr</p>
<h2 id="shell-styleguide"><a href="#shell-styleguide" class="headerlink" title="shell styleguide"></a>shell styleguide</h2><p>参考</p>
<p><a target="_blank" rel="noopener" href="https://google.github.io/styleguide/shellguide.html">https://google.github.io/styleguide/shellguide.html</a></p>
<h2 id="time"><a href="#time" class="headerlink" title="time"></a>time</h2><p><code>time [-p] command [arguments...]</code></p>
<p>-p POSIX格式输出</p>
<p>time的输出</p>
<ul>
<li>real      时钟时间</li>
<li>user      用户态CPU时间</li>
<li>sys       内核态CPU时间</li>
</ul>
<h2 id="type"><a href="#type" class="headerlink" title="type"></a>type</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">type</span> -t <span class="built_in">type</span></span></span><br><span class="line">builtin</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">type</span> <span class="built_in">ls</span></span></span><br><span class="line">ls 是“ls --color=auto”的别名</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">type</span> -a <span class="built_in">ls</span></span></span><br><span class="line">ls 是“ls --color=auto”的别名</span><br><span class="line">ls 是 /usr/bin/ls</span><br><span class="line">ls 是 /bin/ls</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">type</span> mkcd</span></span><br><span class="line">mkcd 是函数</span><br><span class="line">mkcd ()</span><br><span class="line">&#123;</span><br><span class="line">    dir=$1;</span><br><span class="line">    mkdir -p &quot;$&#123;dir&#125;&quot;;</span><br><span class="line">    cd &quot;$&#123;dir&#125;&quot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">type</span> -f mkcd <span class="comment"># 抑制 shell 函数查询</span></span></span><br><span class="line">bash: type: mkcd：未找到</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">type</span> -P <span class="built_in">ls</span></span></span><br><span class="line">/usr/bin/ls</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">type</span> -t <span class="built_in">ls</span></span></span><br><span class="line">alias</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">type</span> -p <span class="built_in">ls</span> <span class="comment"># 当 -t 不返回 file时，无任何值</span></span></span><br></pre></td></tr></table></figure>

<h2 id="变量-1"><a href="#变量-1" class="headerlink" title="变量"></a>变量</h2><ul>
<li>变量名由一系列字母、数字和下划线组成，其中不包含空白字符，变量包含一个值与0或多个属性，属性由<code>declare</code>来声明。</li>
<li>常用的惯例是在脚本中使用大写字母命名环境变量，使用驼峰命名法或小写字母命名其他变量。</li>
<li>赋值操作：<code>name=[value]</code>，其中，空字符串是一个有效值</li>
<li>如果value不包含任何空白字符（例如空格），那么就不需要将其放入引号中，否则必须使用单引号或双引号</li>
<li><code>var = value</code>不同于<code>var=value</code>。两边没有空格的等号是赋值操作符，加上空格的等号表示的是等量关系测试。</li>
<li>在变量名之前加上美元符号（$）就可以访问变量的内容</li>
<li><code>echo $var</code> 也可以这样写：<code>echo $&#123;var&#125;</code></li>
<li>使用单引号时，变量不会被扩展，仍依照原样显示。这意味着<code>echo &#39;$var&#39;</code>会显示<code>$var</code>。</li>
<li>但如果变量var已经定义过，那么<code>echo &quot;$var&quot;</code>会显示出该变量的值；如果没有定义过，则什么都不显示。</li>
<li>可以用下面的方法获得变量值的长度：&#96;length&#x3D;$</li>
</ul>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
        
          <li><a href="/">首页</a></li>
        
          <li><a href="/readme">关于</a></li>
        
          <li><a href="/resume">简历</a></li>
        
          <li><a target="_blank" rel="noopener" href="https://photo.liph.ink">摄影</a></li>
        
          <li><a href="/archives/">归档</a></li>
        
          <li><a target="_blank" rel="noopener" href="https://github.com/liphx">项目</a></li>
        
          <li><a href="/search/">搜索</a></li>
        
      </ul>
    </div>

    
    
      <div id="toc-footer" style="display: none">
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%89%E9%A1%B9"><span class="toc-number">1.</span> <span class="toc-text">选项</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E6%95%B0"><span class="toc-number">2.</span> <span class="toc-text">参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#builtins"><span class="toc-number">3.</span> <span class="toc-text">builtins</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">3.1.</span> <span class="toc-text">:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#-1"><span class="toc-number">3.2.</span> <span class="toc-text">.</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#break"><span class="toc-number">3.3.</span> <span class="toc-text">break</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#continue"><span class="toc-number">3.4.</span> <span class="toc-text">continue</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#IFS"><span class="toc-number">4.</span> <span class="toc-text">IFS</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#alias"><span class="toc-number">5.</span> <span class="toc-text">alias</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#arithmetic"><span class="toc-number">6.</span> <span class="toc-text">arithmetic</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E7%BB%84"><span class="toc-number">7.</span> <span class="toc-text">数组</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%99%AE%E9%80%9A%E6%95%B0%E7%BB%84"><span class="toc-number">7.1.</span> <span class="toc-text">普通数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E8%81%94%E6%95%B0%E7%BB%84"><span class="toc-number">7.2.</span> <span class="toc-text">关联数组</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Job-Control"><span class="toc-number">8.</span> <span class="toc-text">Job Control</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%85%E5%BB%BA%E5%91%BD%E4%BB%A4-builtin"><span class="toc-number">9.</span> <span class="toc-text">内建命令 builtin</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#case"><span class="toc-number">10.</span> <span class="toc-text">case</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%80%E5%87%BA%E7%8A%B6%E6%80%81"><span class="toc-number">11.</span> <span class="toc-text">退出状态</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#echo-%E6%98%BE%E7%A4%BA%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">12.</span> <span class="toc-text">echo - 显示字符串</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#exec"><span class="toc-number">13.</span> <span class="toc-text">exec</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Shell-%E6%89%A9%E5%B1%95"><span class="toc-number">14.</span> <span class="toc-text">Shell 扩展</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%A7%E6%8B%AC%E5%8F%B7%E6%89%A9%E5%B1%95"><span class="toc-number">14.1.</span> <span class="toc-text">大括号扩展</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A2%E6%B5%AA%E5%8F%B7%E6%89%A9%E5%B1%95"><span class="toc-number">14.2.</span> <span class="toc-text">波浪号扩展</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%82%E6%95%B0%E6%89%A9%E5%B1%95"><span class="toc-number">14.3.</span> <span class="toc-text">参数扩展</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E6%9B%BF%E6%8D%A2"><span class="toc-number">14.4.</span> <span class="toc-text">命令替换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%97%E6%9C%AF%E6%89%A9%E5%B1%95"><span class="toc-number">14.5.</span> <span class="toc-text">算术扩展</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E6%9B%BF%E6%8D%A2"><span class="toc-number">14.6.</span> <span class="toc-text">进程替换</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#History"><span class="toc-number">15.</span> <span class="toc-text">History</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#fc"><span class="toc-number">15.1.</span> <span class="toc-text">fc</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#history"><span class="toc-number">15.2.</span> <span class="toc-text">history</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%BD%E6%95%B0"><span class="toc-number">16.</span> <span class="toc-text">函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E5%AE%9A%E4%B9%89"><span class="toc-number">16.1.</span> <span class="toc-text">函数定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%80%E5%87%BA%E7%8A%B6%E6%80%81-1"><span class="toc-number">16.2.</span> <span class="toc-text">退出状态</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B0%83%E7%94%A8%E5%87%BD%E6%95%B0"><span class="toc-number">16.3.</span> <span class="toc-text">调用函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%92%E5%BD%92"><span class="toc-number">17.</span> <span class="toc-text">递归</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%98%E9%87%8F"><span class="toc-number">18.</span> <span class="toc-text">变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Grouping-Commands"><span class="toc-number">19.</span> <span class="toc-text">Grouping Commands</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%AF%94%E8%BE%83%E4%B8%8E%E6%B5%8B%E8%AF%95"><span class="toc-number">20.</span> <span class="toc-text">比较与测试</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#if"><span class="toc-number">21.</span> <span class="toc-text">if</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%97%E6%9C%AF%E6%AF%94%E8%BE%83"><span class="toc-number">21.1.</span> <span class="toc-text">算术比较</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%9B%B8%E5%85%B3%E6%B5%8B%E8%AF%95"><span class="toc-number">21.2.</span> <span class="toc-text">文件系统相关测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%AF%94%E8%BE%83"><span class="toc-number">21.3.</span> <span class="toc-text">字符串比较</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#test"><span class="toc-number">22.</span> <span class="toc-text">test</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Lists-of-Commands"><span class="toc-number"></span> <span class="toc-text">Lists of Commands</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BE%AA%E7%8E%AF"><span class="toc-number">1.</span> <span class="toc-text">循环</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#for"><span class="toc-number">2.</span> <span class="toc-text">for</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%A2%E5%90%91%E5%88%97%E8%A1%A8%E7%9A%84for%E5%BE%AA%E7%8E%AF"><span class="toc-number">2.1.</span> <span class="toc-text">面向列表的for循环</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%AD%E4%BB%A3%E6%8C%87%E5%AE%9A%E8%8C%83%E5%9B%B4%E7%9A%84%E6%95%B0%E5%AD%97"><span class="toc-number">2.2.</span> <span class="toc-text">迭代指定范围的数字</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#while"><span class="toc-number">3.</span> <span class="toc-text">while</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#until"><span class="toc-number">4.</span> <span class="toc-text">until</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pipeline"><span class="toc-number">5.</span> <span class="toc-text">pipeline</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pwd-print-work-directory"><span class="toc-number">6.</span> <span class="toc-text">pwd - print work directory</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#return"><span class="toc-number">7.</span> <span class="toc-text">return</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#select"><span class="toc-number">8.</span> <span class="toc-text">select</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#set"><span class="toc-number">9.</span> <span class="toc-text">set</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#shell-styleguide"><span class="toc-number">10.</span> <span class="toc-text">shell styleguide</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#time"><span class="toc-number">11.</span> <span class="toc-text">time</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#type"><span class="toc-number">12.</span> <span class="toc-text">type</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%98%E9%87%8F-1"><span class="toc-number">13.</span> <span class="toc-text">变量</span></a></li></ol>
      </div>
    

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://liph.ink/codes/bash/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://liph.ink/codes/bash/&text=bash - Bourne Again Shell"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://liph.ink/codes/bash/&title=bash - Bourne Again Shell"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://liph.ink/codes/bash/&is_video=false&description=bash - Bourne Again Shell"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=bash - Bourne Again Shell&body=Check out this article: https://liph.ink/codes/bash/"><i class="fa-solid fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://liph.ink/codes/bash/&title=bash - Bourne Again Shell"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://liph.ink/codes/bash/&title=bash - Bourne Again Shell"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://liph.ink/codes/bash/&title=bash - Bourne Again Shell"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://liph.ink/codes/bash/&title=bash - Bourne Again Shell"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://liph.ink/codes/bash/&name=bash - Bourne Again Shell&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://liph.ink/codes/bash/&t=bash - Bourne Again Shell"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fa-solid fa-bars fa-lg" aria-hidden="true"></i> 菜单</a>
        
          <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fa-solid fa-list fa-lg" aria-hidden="true"></i> 目录</a>
        
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fa-solid fa-share-alt fa-lg" aria-hidden="true"></i> 分享</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up fa-lg" aria-hidden="true"></i> 返回顶部</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2023
    liph
  </div>
  <div class="footer-right">
    <nav>
      <ul>
        <!--
       --><li><a href="/">首页</a></li><!--
     --><!--
       --><li><a href="/readme">关于</a></li><!--
     --><!--
       --><li><a href="/resume">简历</a></li><!--
     --><!--
       --><li><a target="_blank" rel="noopener" href="https://photo.liph.ink">摄影</a></li><!--
     --><!--
       --><li><a href="/archives/">归档</a></li><!--
     --><!--
       --><li><a target="_blank" rel="noopener" href="https://github.com/liphx">项目</a></li><!--
     --><!--
       --><li><a href="/search/">搜索</a></li><!--
     -->
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


    <!-- jquery -->

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script>




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script>
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"复制到粘贴板！\">";
    btn += '<i class="fa-regular fa-clone"></i>';
    btn += '</span>';
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "复制成功！");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Disqus Comments -->

<!-- utterances Comments -->

</body>
</html>
